/*!
 * Virtual Select 1.0
 * https://sa-si-dev.github.io/virtual-select
 * Licensed under MIT (https://github.com/sa-si-dev/virtual-select/blob/master/LICENSE)
 */(()=>{"use strict";var t={"./src/virtual-select.js":
/*!*******************************!*\
  !*** ./src/virtual-select.js ***!
  \*******************************/(t,e,i)=>{function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.r(e),i.d(e,{VirtualSelect:()=>c});var r={13:"onEnterPress",27:"onEscPress",38:"onUpArrowPress",40:"onDownArrowPress"},c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);try{this.setProps(e),this.setDisabledOptions(e.disabledOptions),this.setOptions(e.options),this.render(),this.addEvents(),this.setMethods(),e.selectedValue&&this.setValueMethod(e.selectedValue,this.silentInitialValueSet)}catch(t){console.warn("Couldn't initiate Virtual Select"),console.error(t)}}var e,i,l;return e=t,l=[{key:"init",value:function(e){var i=e.ele;if(i){var o=!1;if("string"!=typeof i||(i=document.querySelector(i))){void 0===i.length&&(i=[i],o=!0);var s=[];return i.forEach((function(i){e.ele=i,s.push(new t(e))})),o?s[0]:s}}}},{key:"closeAllDropbox",value:function(t){document.querySelectorAll(".vscomp-wrapper").forEach((function(e){t&&t===e||e.parentElement.virtualSelect.closeDropbox()}))}},{key:"resetForm",value:function(t){var e=t.target.closest("form");e&&e.querySelectorAll(".vscomp-wrapper").forEach((function(t){t.parentElement.virtualSelect.reset()}))}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(t,e){this.virtualSelect.setValueMethod(t,e)}},{key:"setOptionsMethod",value:function(t){this.virtualSelect.setOptionsMethod(t)}},{key:"setDisabledOptionsMethod",value:function(t){this.virtualSelect.setDisabledOptionsMethod(t)}},{key:"toggleSelectAll",value:function(t){this.virtualSelect.toggleAllOptions(t)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}}],(i=[{key:"render",value:function(){if(this.$ele){var t="vscomp-wrapper closed",e=this.getTooltipAttrText("",!0),i=this.getTooltipAttrText("Clear"),o=this.getStyleText({"max-height":this.optionsHeight}),s={"z-index":this.zIndex};this.dropboxWidth&&(s.width=this.dropboxWidth),this.multiple&&(t+=" multiple"),"top"===this.position&&(t+=" position-top"),this.hideClearButton||(t+=" has-clear-button");var n='<div class="'.concat(t,'" tabindex="0">\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(e,">\n            ").concat(this.placeholder,'\n          </div>\n          <div class="vscomp-arrow"></div>\n          <div class="vscomp-clear-button toggle-button-child" ').concat(i,'>\n          </div>\n        </div>\n        <div class="vscomp-dropbox" ').concat(this.getStyleText(s),'>\n          <div class="vscomp-search-wrapper"></div>\n          <div class="vscomp-options-container" ').concat(o,'>\n            <div class="vscomp-options-list">\n              <div class="vscomp-options"></div>\n            </div>\n          </div>\n          <div class="vscomp-no-options">').concat(this.noOptionsText,'</div>\n          <div class="vscomp-no-search-results">').concat(this.noSearchResultsText,"</div>\n        </div>\n      </div>");this.$ele.innerHTML=n,this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$dropbox=this.$ele.querySelector(".vscomp-dropbox"),this.$search=this.$ele.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$ele.querySelector(".vscomp-options-container"),this.$optionsList=this.$ele.querySelector(".vscomp-options-list"),this.$options=this.$ele.querySelector(".vscomp-options"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setOptionsHeight(),this.setVisibleOptions()}}},{key:"renderOptions",value:function(){var t=this,e="",i=this.getVisibleOptions(),o="",s="",n=this.getStyleText({height:this.optionHeight+"px"});if(this.multiple&&(o='<span class="checkbox-icon"></span>'),this.allowNewOption){var l=this.getTooltipAttrText("New Option");s='<span class="vscomp-new-option-icon" '.concat(l,"></span>")}i.forEach((function(i){var l=i.label,a="vscomp-option",r=t.getTooltipAttrText("",!0),c="";i.isSelected&&(a+=" selected"),i.isFocused&&(a+=" focused"),i.isDisabled&&(a+=" disabled"),i.isCurrentNew&&(a+=" current-new",c+=s),e+='<div class="'.concat(a,'" data-value="').concat(i.value,'" data-index="').concat(i.index,'" data-visible-index="').concat(i.visibleIndex,'" ').concat(n,">\n          ").concat(o,'\n          <span class="vscomp-option-text" ').concat(r,">\n            ").concat(l,"\n          </span>\n          ").concat(c,"\n        </div>")})),this.$options.innerHTML=e;var a=!this.options.length,r=!a&&!i.length;this.allowNewOption||this.toggleClass(this.$wrapper,"has-no-search-results",r),this.toggleClass(this.$wrapper,"has-no-options",a),this.setOptionsPosition(),this.setOptionsTooltip(),this.moveFocusedOptionToView()}},{key:"renderSearch",value:function(){if(this.hasSearch){var t="";this.multiple&&(t='<span class="checkbox-icon toggle-all-options"></span>');var e='<div class="vscomp-search-container">\n        '.concat(t,'\n        <input type="text" class="vscomp-search-input" placeholder="Search...">\n        <span class="vscomp-search-clear">&times;</span>\n      </div>');this.$search.innerHTML=e,this.$searchInput=this.$ele.querySelector(".vscomp-search-input"),this.$searchClear=this.$ele.querySelector(".vscomp-search-clear"),this.$toggleAllOptions=this.$ele.querySelector(".toggle-all-options"),this.addEvent(this.$searchInput,"keyup change","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllOptions,"click","onToggleAllOptions")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$wrapper,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove")}},{key:"addEvent",value:function(t,e,i){var o=this;t&&(e=this.removeArrayEmpty(e.split(" "))).forEach((function(e){var s="".concat(i,"-").concat(e),n=o.events[s];n||(n=o[i].bind(o),o.events[s]=n),(t=o.getElements(t)).forEach((function(t){t.addEventListener(e,n)}))}))}},{key:"dispatchEvent",value:function(t,e){t&&(t=this.getElements(t),setTimeout((function(){t.forEach((function(t){t.dispatchEvent(new Event(e,{bubbles:!0}))}))}),0))}},{key:"onDocumentClick",value:function(e){t.closeAllDropbox(e.target.closest(".vscomp-wrapper"))}},{key:"onKeyDown",value:function(t){var e=t.which||t.keyCode,i=r[e];i&&this[i](t)}},{key:"onEnterPress",value:function(){this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onEscPress",value:function(){this.isOpened()&&this.closeDropbox()}},{key:"onDownArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("next"):this.openDropbox()}},{key:"onUpArrowPress",value:function(t){t.preventDefault(),this.isOpened()?this.focusOption("previous"):this.openDropbox()}},{key:"onToggleButtonClick",value:function(t){t.target.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(t){this.selectOption(t.target.closest(".vscomp-option:not(.disabled)"))}},{key:"onOptionsMouseOver",value:function(t){var e=t.target.closest(".vscomp-option:not(.disabled)");e&&this.focusOption(null,e)}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(t){t.stopPropagation(),this.setSearchValue(t.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"setProps",value:function(t){t=this.setDefaultProps(t),this.setPropsFromElementAttr(t),this.$ele=t.ele,this.labelKey=t.labelKey,this.valueKey=t.valueKey,this.termsKey=t.termsKey,this.optionsCount=parseInt(t.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionHeightText=t.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=this.convertToBoolean(t.multiple),this.hasSearch=this.convertToBoolean(t.search),this.hideClearButton=this.convertToBoolean(t.hideClearButton),this.silentInitialValueSet=this.convertToBoolean(t.silentInitialValueSet),this.allowNewOption=this.convertToBoolean(t.allowNewOption),this.markSearchResults=this.convertToBoolean(t.markSearchResults),this.noOptionsText=t.noOptionsText,this.noSearchResultsText=t.noSearchResultsText,this.placeholder=t.placeholder,this.position=t.position,this.dropboxWidth=t.dropboxWidth,this.noOfDisplayValues=parseInt(t.noOfDisplayValues),this.zIndex=parseInt(t.zIndex),this.selectedValues=[],this.events={},this.tooltipEnterDelay=200,this.transitionDuration=250,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,this.optionsHeight=this.optionsCount*this.optionHeight+"px",(void 0===t.search&&this.multiple||this.allowNewOption)&&(this.hasSearch=!0)}},{key:"setDefaultProps",value:function(t){return Object.assign({labelKey:"label",valueKey:"value",termsKey:"terms",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",multiple:!1,hideClearButton:!1,silentInitialValueSet:!1,noOptionsText:"No options found",noSearchResultsText:"No results found",placeholder:"Select",position:"auto",zIndex:1,allowNewOption:!1,markSearchResults:!1},t)}},{key:"setPropsFromElementAttr",value:function(t){var e=t.ele,i={multiple:"multiple",placeholder:"placeholder","data-label-key":"labelKey","data-value-key":"valueKey","data-terms-key":"termsKey","data-search":"search","data-hide-clear-button":"hideClearButton","data-options-count":"optionsCount","data-option-height":"optionHeight","data-position":"position","data-no-options-text":"noOptionsText","data-no-search-results-text":"noSearchResultsText","data-silent-initial-value-set":"silentInitialValueSet","data-dropbox-width":"dropboxWidth","data-z-index":"zIndex","data-no-of-display-values":"noOfDisplayValues","data-allow-new-option":"allowNewOption","data-mark-search-results":"markSearchResults"};for(var o in i){var s=e.getAttribute(o);"multiple"!==o||""!==s&&"true"!==s||(s=!0),s&&(t[i[o]]=s)}}},{key:"setMethods",value:function(){var e=this.$ele;e.virtualSelect=this,e.value=this.multiple?[]:"",e.reset=t.reset,e.setValue=t.setValueMethod,e.setOptions=t.setOptionsMethod,e.setDisabledOptions=t.setDisabledOptionsMethod,e.toggleSelectAll=t.toggleSelectAll,e.isAllSelected=t.isAllSelected}},{key:"setValueMethod",value:function(t,e){Array.isArray(t)||(t=[t]),t=t.map((function(t){return t||0==t?t.toString():""}));var i=[];this.options.forEach((function(e){-1===t.indexOf(e.value)||e.isDisabled?e.isSelected=!1:(e.isSelected=!0,i.push(e.value))})),this.multiple||(i=i[0]),this.setValue(i,!e),this.afterValueSet()}},{key:"setOptionsMethod",value:function(t){this.setOptions(t),this.setOptionsHeight(),this.setVisibleOptions(),this.reset()}},{key:"setDisabledOptionsMethod",value:function(t){this.setDisabledOptions(t,!0),this.setValueMethod(null),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t.map((function(t){return t.toString()})),this.disabledOptions=t,e&&t.length&&this.options.forEach((function(e){return e.isDisabled=-1!==t.indexOf(e.value),e}))}},{key:"setOptions",value:function(t){t||(t=[]);var e=this.disabledOptions,i=e.length,o=this.labelKey,s=this.valueKey,n=this.termsKey;this.visibleOptionsCount=t.length,this.options=t.map((function(t,l){var a=(t[s]||"").toString(),r={index:l,value:a,label:t[o]||"",isVisible:!0,terms:Array.isArray(t[n])?t[n]:[]};return i&&(r.isDisabled=-1!==e.indexOf(a)),r})),this.lastOptionIndex=this.options.length-1}},{key:"setVisibleOptions",value:function(){var t=s(this.options),e=2*this.optionsCount,i=this.getVisibleStartIndex(),o=this.getNewOption(),n=i+e-1,l=0;o&&(o.visibleIndex=l,l++),t=t.filter((function(t){var e=!1;return t.isVisible&&!t.isCurrentNew&&(e=l>=i&&l<=n,t.visibleIndex=l,l++),e})),o&&(t=[o].concat(s(t))),this.visibleOptions=t,this.renderOptions()}},{key:"setOptionsPosition",value:function(t){void 0===t&&(t=this.getVisibleStartIndex());var e=t*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(e,"px, 0)"),this.setData(this.$options,"top",e)}},{key:"setOptionsTooltip",value:function(){var t=this;this.getVisibleOptions().forEach((function(e){var i=t.$dropbox.querySelector('.vscomp-option[data-index="'.concat(e.index,'"] .vscomp-option-text'));t.setData(i,"tooltip",e.label)}))}},{key:"setValue",value:function(t,e){t?Array.isArray(t)?this.selectedValues=s(t):this.selectedValues=[t]:this.selectedValues=[],this.$ele.value=this.multiple?this.selectedValues:this.selectedValues[0]||"",this.setValueText(),this.toggleClass(this.$wrapper,"has-value",this.isNotEmpty(this.selectedValues)),e&&this.dispatchEvent(this.$ele,"change")}},{key:"setValueText",value:function(){var t,e=[],i=[],o=this.selectedValues,s=this.noOfDisplayValues,l=0,a=function(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,s=function(){};return{s,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,r=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){r=!0,l=t},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw l}}}}(this.options);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(!r.isCurrentNew){if(l>50)break;var c=r.value;if(-1!==o.indexOf(c)){var u=r.label;e.push(u),++l<=s&&i.push('<span class="vscomp-value-tag">'.concat(u,"</span>"))}}}}catch(t){a.e(t)}finally{a.f()}var h=o.length-s;h>0&&i.push('<span class="vscomp-value-tag">+ '.concat(h," more...</span>")),this.$valueText.innerHTML=e.join(", ")||this.placeholder,this.setData(this.$valueText,"tooltip",i.join(", "))}},{key:"setSearchValue",value:function(t,e){if(t!==this.searchValueOriginal){e||(this.$searchInput.value=t);var i=this.markSearchResults,o=t.toLowerCase().trim(),s=0,n=!1;this.searchValue=o,this.searchValueOriginal=t,this.options.forEach((function(t){if(!t.isCurrentNew){i&&(t.label=t.label.replace(/<\/*mark>/g,""));var e=t.label.toString().toLowerCase(),l=-1!==e.indexOf(o),a=!l&&t.terms.some((function(t){return-1!==t.indexOf(o)})),r=l||a;t.isVisible=r,r&&(s++,i&&(l?t.label=t.label.replace(new RegExp("(".concat(o,")"),"gi"),"<mark>$1</mark>"):a&&(t.label="<mark>".concat(t.label,"</mark>")))),n||(n=e===o)}})),this.visibleOptionsCount=s,this.allowNewOption&&(t&&!n?(this.setNewOption(),this.visibleOptionsCount++):this.removeNewOption()),this.toggleClass(this.$wrapper,"has-search-value",t),this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions()}}},{key:"setOptionProp",value:function(t,e,i){this.options[t]&&(this.options[t][e]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height=this.optionHeight*this.visibleOptionsCount+"px"}},{key:"setDropboxPosition",value:function(){if("auto"===this.position){var t=this.getMoreVisibleSides(this.$wrapper),e=!1;if(this.dropboxWidth){var i=this.$toggleButton.getBoundingClientRect(),o=window.innerWidth,s=parseFloat(this.dropboxWidth),n=i.left+s>o,l=s>i.right;n&&!l&&(e=!0)}this.toggleClass(this.$wrapper,"position-top","top"===t.vertical),this.toggleClass(this.$wrapper,"position-left",e)}}},{key:"setNewOption",value:function(){var t=this.searchValueOriginal.trim();if(t){var e=this.getNewOption();if(e){var i=e.index;this.setOptionProp(i,"value",t),this.setOptionProp(i,"label",t)}else{var o={value:t,label:t,isCurrentNew:!0};this.addOption(this.getOptionObj(o))}}}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.selectedValues:this.selectedValues[0]}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var t=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return t<0&&(t=0),t}},{key:"getTooltipAttrText",value:function(t,e){var i={"data-tooltip":t||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-ellipsis-only":e||!1};return this.getAttributesText(i)}},{key:"getOptionObj",value:function(t){if(t)return{index:t.index,isCurrentNew:t.isCurrentNew||!1,value:t.value,label:t.label}}},{key:"getNewOption",value:function(){var t=this.options[this.lastOptionIndex];if(t&&t.isCurrentNew)return t}},{key:"getOptionIndex",value:function(t){var e;return t&&this.options.some((function(i){if(i.value==t)return e=i.index,!0})),e}},{key:"openDropbox",value:function(t){var e=this;this.setDropboxPosition(),this.removeClass(this.$wrapper,"closed"),setTimeout((function(){e.addClass(e.$wrapper,"opened"),t||(e.addClass(e.$wrapper,"focused"),e.focusSearchInput())}),0)}},{key:"closeDropbox",value:function(t){var e=this,i=t?0:this.transitionDuration;setTimeout((function(){e.removeClass(e.$wrapper,"opened focused"),e.removeOptionFocus()}),0),setTimeout((function(){e.addClass(e.$wrapper,"closed")}),i)}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"isOpened",value:function(){return this.hasClass(this.$wrapper,"opened")}},{key:"focusSearchInput",value:function(){var t=this.$searchInput;t&&t.focus()}},{key:"focusOption",value:function(t,e){var i,o=this.$dropbox.querySelector(".vscomp-option.focused");if(e)i=e;else if(o)i=this.getSibling(o,t);else{var s=this.getFirstVisibleOptionIndex();i=this.$dropbox.querySelector('.vscomp-option[data-visible-index="'.concat(s,'"]')),this.hasClass(i,"disabled")&&(i=this.getSibling(i,"next"))}i&&i!==o&&(o&&this.removeClass(o,"focused"),this.addClass(i,"focused"),this.toggleFocusedProp(this.getData(i,"index"),!0),this.moveFocusedOptionToView(i))}},{key:"moveFocusedOptionToView",value:function(t){if(t||(t=this.$dropbox.querySelector(".vscomp-option.focused")),t){var e,i=this.$optionsContainer.getBoundingClientRect(),o=t.getBoundingClientRect(),s=i.top,n=i.bottom,l=i.height,a=o.top,r=o.bottom,c=o.height,u=t.offsetTop,h=this.getData(this.$options,"top","number");s>a?e=u+h:n<r&&(e=u-l+c+h),void 0!==e&&(this.$optionsContainer.scrollTop=e)}}},{key:"removeOptionFocus",value:function(){var t=this.$dropbox.querySelector(".vscomp-option.focused");t&&(this.removeClass(t,"focused"),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(t){if(t){var e=!this.hasClass(t,"selected");if(e||this.multiple){var i=this.selectedValues,o=this.getData(t,"value"),s=this.getData(t,"index");if(this.toggleSelectedProp(s,e),e){if(this.multiple)i.push(o),this.toggleAllOptionsClass();else{i.length&&this.toggleSelectedProp(this.getOptionIndex(i[0]),!1),i=[o];var n=this.$ele.querySelector(".vscomp-option.selected");n&&this.toggleClass(n,"selected",!1),this.closeDropbox()}this.toggleClass(t,"selected")}else this.multiple&&(this.toggleClass(t,"selected"),this.removeItemFromArray(i,o),this.toggleAllOptionsClass(!1));this.hasClass(t,"current-new")&&this.beforeSelectNewValue(),this.setValue(i,!0)}else this.closeDropbox()}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropbox.querySelector(".vscomp-option.focused"))}},{key:"toggleAllOptions",value:function(t){if(this.multiple){"boolean"!=typeof t&&(t=!this.hasClass(this.$toggleAllOptions,"checked"));var e=[];this.options.forEach((function(i){i.isDisabled||i.isCurrentNew||(i.isSelected=t,t&&e.push(i.value))})),this.setValue(e,!0),this.toggleAllOptionsClass(t),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(t){"boolean"!=typeof t&&(t=!1,this.options.length&&(t=!this.options.some((function(t){return!t.isSelected&&!t.isDisabled})))),this.toggleClass(this.$toggleAllOptions,"checked",t),this.isAllSelected=t}},{key:"toggleFocusedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(t,"isFocused",e),this.focusedOptionIndex=t}},{key:"toggleSelectedProp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(t,"isSelected",e)}},{key:"scrollToTop",value:function(){var t=!this.isOpened();t&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),t&&this.closeDropbox(!0)}},{key:"reset",value:function(){this.options.forEach((function(t){t.isSelected=!1})),this.setValue(null,!0),this.afterValueSet(!0)}},{key:"afterValueSet",value:function(t){this.scrollToTop(),this.toggleAllOptionsClass(!t&&void 0),this.setSearchValue(""),this.renderOptions()}},{key:"addOption",value:function(t){t&&(this.lastOptionIndex++,t.index=this.lastOptionIndex,this.options.push(this.getOptionObj(t)))}},{key:"removeOption",value:function(t){(t||0==t)&&(this.options.splice(t,1),this.lastOptionIndex--)}},{key:"removeNewOption",value:function(){var t=this.getNewOption();t&&this.removeOption(t.index)}},{key:"beforeSelectNewValue",value:function(){var t=this,e=this.getNewOption().index;this.setOptionProp(e,"isCurrentNew",!1),this.setOptionProp(e,"isNew",!0),setTimeout((function(){t.setSearchValue(""),t.focusSearchInput()}),0)}},{key:"addClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).add.apply(i,s(e))})))}},{key:"removeClass",value:function(t,e){t&&(e=e.split(" "),this.getElements(t).forEach((function(t){var i;(i=t.classList).remove.apply(i,s(e))})))}},{key:"toggleClass",value:function(t,e,i){var o;if(t)return void 0!==i&&(i=Boolean(i)),this.getElements(t).forEach((function(t){o=t.classList.toggle(e,i)})),o}},{key:"hasClass",value:function(t,e){return!!t&&t.classList.contains(e)}},{key:"isEmpty",value:function(t){var e=!1;return t?Array.isArray(t)?0===t.length&&(e=!0):"object"===o(t)&&0===Object.keys(t).length&&(e=!0):e=!0,e}},{key:"isNotEmpty",value:function(t){return!this.isEmpty(t)}},{key:"setData",value:function(t,e,i){t&&(t.dataset[e]=i)}},{key:"getStyleText",value:function(t,e){var i="";for(var o in t)i+="".concat(o,": ").concat(t[o],";");return i&&!e&&(i='style="'.concat(i,'"')),i}},{key:"getElements",value:function(t){if(t)return void 0===t.length&&(t=[t]),t}},{key:"getData",value:function(t,e,i){if(t){var o=t?t.dataset[e]:"";return"number"===i?o=parseFloat(o)||0:"true"===o?o=!0:"false"===o&&(o=!1),o}}},{key:"removeItemFromArray",value:function(t,e,i){if(!Array.isArray(t)||!t.length||!e)return t;i&&(t=s(t));var o=t.indexOf(e);return-1!==o&&t.splice(o,1),t}},{key:"removeArrayEmpty",value:function(t){return Array.isArray(t)&&t.length?t.filter((function(t){return!!t})):[]}},{key:"getMoreVisibleSides",value:function(t){if(!t)return{};var e=t.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight,s=e.left,n=e.top;return{horizontal:s>i-s-e.width?"left":"right",vertical:n>o-n-e.height?"top":"bottom"}}},{key:"getSibling",value:function(t,e){var i="next"===e?"nextElementSibling":"previousElementSibling";do{t&&(t=t[i])}while(this.hasClass(t,"disabled"));return t}},{key:"getAttributesText",value:function(t){var e="";if(!t)return e;for(var i in t)e+=" ".concat(i,'="').concat(t[i],'" ');return e}},{key:"convertToBoolean",value:function(t){return!0===t||"true"===t}}])&&a(e.prototype,i),l&&a(e,l),t}();document.addEventListener("reset",c.resetForm),window.VirtualSelect=c}},e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={exports:{}};return t[o](s,s.exports,i),s.exports}i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i("./src/virtual-select.js")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC8uL3NyYy92aXJ0dWFsLXNlbGVjdC5qcyIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdmlydHVhbC1zZWxlY3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly92aXJ0dWFsLXNlbGVjdC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3ZpcnR1YWwtc2VsZWN0L3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJrZXlEb3duTWV0aG9kTWFwcGluZyIsIjEzIiwiMjciLCIzOCIsIjQwIiwiVmlydHVhbFNlbGVjdCIsIm9wdGlvbnMiLCJ0aGlzIiwic2V0UHJvcHMiLCJzZXREaXNhYmxlZE9wdGlvbnMiLCJkaXNhYmxlZE9wdGlvbnMiLCJzZXRPcHRpb25zIiwicmVuZGVyIiwiYWRkRXZlbnRzIiwic2V0TWV0aG9kcyIsInNlbGVjdGVkVmFsdWUiLCJzZXRWYWx1ZU1ldGhvZCIsInNpbGVudEluaXRpYWxWYWx1ZVNldCIsImUiLCJjb25zb2xlIiwid2FybiIsImVycm9yIiwiJGVsZUFycmF5IiwiZWxlIiwic2luZ2xlRWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidW5kZWZpbmVkIiwibGVuZ3RoIiwiaW5zdGFuY2VzIiwiZm9yRWFjaCIsIiRlbGUiLCJwdXNoIiwiJGVsZVRvS2VlcE9wZW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwicGFyZW50RWxlbWVudCIsInZpcnR1YWxTZWxlY3QiLCJjbG9zZURyb3Bib3giLCIkZm9ybSIsInRhcmdldCIsImNsb3Nlc3QiLCJyZXNldCIsInZhbHVlIiwic2lsZW50Q2hhbmdlIiwic2V0T3B0aW9uc01ldGhvZCIsInNldERpc2FibGVkT3B0aW9uc01ldGhvZCIsImlzU2VsZWN0ZWQiLCJ0b2dnbGVBbGxPcHRpb25zIiwiaXNBbGxTZWxlY3RlZCIsIndyYXBwZXJDbGFzc2VzIiwidmFsdWVUb29sdGlwIiwiZ2V0VG9vbHRpcEF0dHJUZXh0IiwiY2xlYXJCdXR0b25Ub29sdGlwIiwib3B0aW9uc1N0eWxlVGV4dCIsImdldFN0eWxlVGV4dCIsIm9wdGlvbnNIZWlnaHQiLCJkcm9wYm94U3R5bGUiLCJ6SW5kZXgiLCJkcm9wYm94V2lkdGgiLCJ3aWR0aCIsIm11bHRpcGxlIiwicG9zaXRpb24iLCJoaWRlQ2xlYXJCdXR0b24iLCJodG1sIiwicGxhY2Vob2xkZXIiLCJub09wdGlvbnNUZXh0Iiwibm9TZWFyY2hSZXN1bHRzVGV4dCIsImlubmVySFRNTCIsIiR3cmFwcGVyIiwiJHRvZ2dsZUJ1dHRvbiIsIiRjbGVhckJ1dHRvbiIsIiRkcm9wYm94IiwiJHNlYXJjaCIsIiRvcHRpb25zQ29udGFpbmVyIiwiJG9wdGlvbnNMaXN0IiwiJG9wdGlvbnMiLCIkdmFsdWVUZXh0IiwiYWRkQ2xhc3MiLCJyZW5kZXJTZWFyY2giLCJzZXRPcHRpb25zSGVpZ2h0Iiwic2V0VmlzaWJsZU9wdGlvbnMiLCJ2aXNpYmxlT3B0aW9ucyIsImdldFZpc2libGVPcHRpb25zIiwiY2hlY2tib3hIdG1sIiwibmV3T3B0aW9uSWNvbkh0bWwiLCJzdHlsZVRleHQiLCJoZWlnaHQiLCJvcHRpb25IZWlnaHQiLCJhbGxvd05ld09wdGlvbiIsIm5ld09wdGlvblRvb2x0aXAiLCJkIiwib3B0aW9uTGFiZWwiLCJsYWJlbCIsIm9wdGlvbkNsYXNzZXMiLCJvcHRpb25Ub29sdGlwIiwicmlnaHRTZWN0aW9uIiwiaXNGb2N1c2VkIiwiaXNEaXNhYmxlZCIsImlzQ3VycmVudE5ldyIsImluZGV4IiwidmlzaWJsZUluZGV4IiwiaGFzTm9PcHRpb25zIiwiaGFzTm9TZWFyY2hSZXN1bHRzIiwidG9nZ2xlQ2xhc3MiLCJzZXRPcHRpb25zUG9zaXRpb24iLCJzZXRPcHRpb25zVG9vbHRpcCIsIm1vdmVGb2N1c2VkT3B0aW9uVG9WaWV3IiwiaGFzU2VhcmNoIiwiJHNlYXJjaElucHV0IiwiJHNlYXJjaENsZWFyIiwiJHRvZ2dsZUFsbE9wdGlvbnMiLCJhZGRFdmVudCIsImV2ZW50cyIsIm1ldGhvZCIsInJlbW92ZUFycmF5RW1wdHkiLCJzcGxpdCIsImV2ZW50IiwiZXZlbnRzS2V5IiwiY2FsbGJhY2siLCJiaW5kIiwiZ2V0RWxlbWVudHMiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiYnViYmxlcyIsImNsb3NlQWxsRHJvcGJveCIsImtleSIsIndoaWNoIiwia2V5Q29kZSIsImlzT3BlbmVkIiwic2VsZWN0Rm9jdXNlZE9wdGlvbiIsIm9wZW5Ecm9wYm94IiwicHJldmVudERlZmF1bHQiLCJmb2N1c09wdGlvbiIsInRvZ2dsZURyb3Bib3giLCJzZWxlY3RPcHRpb24iLCJyZW1vdmVPcHRpb25Gb2N1cyIsInN0b3BQcm9wYWdhdGlvbiIsInNldFNlYXJjaFZhbHVlIiwiZm9jdXNTZWFyY2hJbnB1dCIsInNldERlZmF1bHRQcm9wcyIsInNldFByb3BzRnJvbUVsZW1lbnRBdHRyIiwibGFiZWxLZXkiLCJ2YWx1ZUtleSIsInRlcm1zS2V5Iiwib3B0aW9uc0NvdW50IiwicGFyc2VJbnQiLCJoYWxmT3B0aW9uc0NvdW50IiwiTWF0aCIsImNlaWwiLCJvcHRpb25IZWlnaHRUZXh0IiwicGFyc2VGbG9hdCIsImNvbnZlcnRUb0Jvb2xlYW4iLCJzZWFyY2giLCJtYXJrU2VhcmNoUmVzdWx0cyIsIm5vT2ZEaXNwbGF5VmFsdWVzIiwic2VsZWN0ZWRWYWx1ZXMiLCJ0b29sdGlwRW50ZXJEZWxheSIsInRyYW5zaXRpb25EdXJhdGlvbiIsInNlYXJjaFZhbHVlIiwic2VhcmNoVmFsdWVPcmlnaW5hbCIsIk9iamVjdCIsImFzc2lnbiIsIm1hcHBpbmciLCJrIiwiZ2V0QXR0cmlidXRlIiwic2V0VmFsdWUiLCJ0b2dnbGVTZWxlY3RBbGwiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJ2IiwidG9TdHJpbmciLCJ2YWxpZFZhbHVlcyIsImluZGV4T2YiLCJhZnRlclZhbHVlU2V0Iiwic2V0T3B0aW9uc1Byb3AiLCJoYXNEaXNhYmxlZE9wdGlvbnMiLCJ2aXNpYmxlT3B0aW9uc0NvdW50IiwiaSIsIm9wdGlvbiIsImlzVmlzaWJsZSIsInRlcm1zIiwibGFzdE9wdGlvbkluZGV4IiwibWF4T3B0aW9uc1RvU2hvdyIsInN0YXJ0SW5kZXgiLCJnZXRWaXNpYmxlU3RhcnRJbmRleCIsIm5ld09wdGlvbiIsImdldE5ld09wdGlvbiIsImVuZEluZGV4IiwiZmlsdGVyIiwiaW5WaWV3IiwicmVuZGVyT3B0aW9ucyIsInRvcCIsInN0eWxlIiwidHJhbnNmb3JtIiwic2V0RGF0YSIsIiRvcHRpb25FbGUiLCJ0cmlnZ2VyRXZlbnQiLCJzZXRWYWx1ZVRleHQiLCJpc05vdEVtcHR5IiwidmFsdWVUZXh0Iiwic2VsZWN0ZWRWYWx1ZXNDb3VudCIsIm1vcmVTZWxlY3RlZE9wdGlvbnMiLCJqb2luIiwic2tpcElucHV0U2V0IiwidG9Mb3dlckNhc2UiLCJ0cmltIiwiaGFzRXhhY3RPcHRpb24iLCJyZXBsYWNlIiwibWF0Y2hlZExhYmVsIiwibWF0Y2hlZFRlcm1zIiwic29tZSIsIngiLCJSZWdFeHAiLCJzZXROZXdPcHRpb24iLCJyZW1vdmVOZXdPcHRpb24iLCJzY3JvbGxUb1RvcCIsIm1vcmVWaXNpYmxlU2lkZXMiLCJnZXRNb3JlVmlzaWJsZVNpZGVzIiwic2hvd09uTGVmdCIsImJ1dHRvbkNvb3JkcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInZpZXdwb3J0V2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaGlkZGVuT25SaWdodCIsImxlZnQiLCJoaWRkZW5PbkxlZnQiLCJyaWdodCIsInZlcnRpY2FsIiwibmV3SW5kZXgiLCJzZXRPcHRpb25Qcm9wIiwiZGF0YSIsImFkZE9wdGlvbiIsImdldE9wdGlvbk9iaiIsInNjcm9sbFRvcCIsImdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4IiwidGV4dCIsImVsbGlwc2lzT25seSIsImdldEF0dHJpYnV0ZXNUZXh0IiwibGFzdE9wdGlvbiIsImlzU2lsZW50Iiwic2V0RHJvcGJveFBvc2l0aW9uIiwicmVtb3ZlQ2xhc3MiLCJoYXNDbGFzcyIsImZvY3VzIiwiZGlyZWN0aW9uIiwiJG5ld0ZvY3VzZWRFbGUiLCIkZm9jdXNlZEVsZSIsImdldFNpYmxpbmciLCJmaXJzdFZpc2libGVPcHRpb25JbmRleCIsInRvZ2dsZUZvY3VzZWRQcm9wIiwiZ2V0RGF0YSIsIm5ld1Njcm9sbFRvcCIsImNvbnRhaW5lclJlY3QiLCJvcHRpb25SZWN0IiwiY29udGFpbmVyVG9wIiwiY29udGFpbmVyQm90dG9tIiwiYm90dG9tIiwiY29udGFpbmVySGVpZ2h0Iiwib3B0aW9uVG9wIiwib3B0aW9uQm90dG9tIiwib3B0aW9uT2Zmc2V0VG9wIiwib2Zmc2V0VG9wIiwib3B0aW9uc1RvcCIsImlzQWRkaW5nIiwic2VsZWN0ZWRJbmRleCIsInRvZ2dsZVNlbGVjdGVkUHJvcCIsInRvZ2dsZUFsbE9wdGlvbnNDbGFzcyIsImdldE9wdGlvbkluZGV4IiwiJHByZXZTZWxlY3RlZE9wdGlvbiIsInJlbW92ZUl0ZW1Gcm9tQXJyYXkiLCJiZWZvcmVTZWxlY3ROZXdWYWx1ZSIsImZvY3VzZWRPcHRpb25JbmRleCIsImlzQ2xvc2VkIiwiaXNSZXNldCIsInNwbGljZSIsInJlbW92ZU9wdGlvbiIsImNsYXNzTmFtZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImlzQWRkIiwiaXNBZGRlZCIsIkJvb2xlYW4iLCJ0b2dnbGUiLCJjb250YWlucyIsInJlc3VsdCIsImtleXMiLCJpc0VtcHR5IiwibmFtZSIsImRhdGFzZXQiLCJwcm9wcyIsInNraXBBdHRyTmFtZSIsInR5cGUiLCJhcnJheSIsImNsb25lQXJyYXkiLCJib3giLCJhdmFpbGFibGVXaWR0aCIsImF2YWlsYWJsZUhlaWdodCIsImlubmVySGVpZ2h0IiwibGVmdEFyZWEiLCJ0b3BBcmVhIiwiaG9yaXpvbnRhbCIsInByb3BOYW1lIiwicmVzZXRGb3JtIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7NHJDQUFBLElBQU1BLEVBQXVCLENBQzNCQyxHQUFJLGVBQ0pDLEdBQUksYUFDSkMsR0FBSSxpQkFDSkMsR0FBSSxvQkFJT0MsRUFBYixXQTRCRSxXQUFZQyxJLDRGQUFTLFNBQ25CLElBQ0VDLEtBQUtDLFNBQVNGLEdBQ2RDLEtBQUtFLG1CQUFtQkgsRUFBUUksaUJBQ2hDSCxLQUFLSSxXQUFXTCxFQUFRQSxTQUN4QkMsS0FBS0ssU0FDTEwsS0FBS00sWUFDTE4sS0FBS08sYUFFRFIsRUFBUVMsZUFDVlIsS0FBS1MsZUFBZVYsRUFBUVMsY0FBZVIsS0FBS1UsdUJBRWxELE1BQU9DLEdBQ1BDLFFBQVFDLEtBQVIsb0NBQ0FELFFBQVFFLE1BQU1ILEksVUExQ3BCLE8sRUFBQSxFLEVBQUEsNEJBNDJDY1osR0FDVixJQUFJZ0IsRUFBWWhCLEVBQVFpQixJQUV4QixHQUFLRCxFQUFMLENBSUEsSUFBSUUsR0FBWSxFQUVoQixHQUF5QixpQkFBZEYsSUFDVEEsRUFBWUcsU0FBU0MsY0FBY0osSUFEckMsTUFReUJLLElBQXJCTCxFQUFVTSxTQUNaTixFQUFZLENBQUNBLEdBQ2JFLEdBQVksR0FHZCxJQUFJSyxFQUFZLEdBTWhCLE9BTEFQLEVBQVVRLFNBQVEsU0FBQ0MsR0FDakJ6QixFQUFRaUIsSUFBTVEsRUFDZEYsRUFBVUcs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LEVBQU1DLElBQUtKLEVBQVczTCxNQ0ozRXNMLEVBQW9CTSxFQUFJLENBQUNJLEVBQUtDLElBQVM5SixPQUFPK0osVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NDakZYLEVBQW9CZSxFQUFLYixJQUNILG9CQUFYYyxRQUEwQkEsT0FBT0MsYUFDMUNwSyxPQUFPMEosZUFBZUwsRUFBU2MsT0FBT0MsWUFBYSxDQUFFOVIsTUFBTyxXQUU3RDBILE9BQU8wSixlQUFlTCxFQUFTLGFBQWMsQ0FBRS9RLE9BQU8sS0NIdkQ2USxFQUFvQiw0QiIsImZpbGUiOiJ2aXJ0dWFsLXNlbGVjdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBrZXlEb3duTWV0aG9kTWFwcGluZyA9IHtcclxuICAxMzogJ29uRW50ZXJQcmVzcycsXHJcbiAgMjc6ICdvbkVzY1ByZXNzJyxcclxuICAzODogJ29uVXBBcnJvd1ByZXNzJyxcclxuICA0MDogJ29uRG93bkFycm93UHJlc3MnLFxyXG59O1xyXG5cclxuLyoqIENsYXNzIHJlcHJlc2VudGluZyBWaXJ0dWFsU2VsZWN0ICovXHJcbmV4cG9ydCBjbGFzcyBWaXJ0dWFsU2VsZWN0IHtcclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBWaXJ0dWFsU2VsZWN0XHJcbiAgICogQHByb3BlcnR5IHsoZWxlbWVudHxzdHJpbmcpfSBlbGUgLSBQYXJlbnQgZWxlbWVudCB0byByZW5kZXIgVmlydHVhbFNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7b2JqZWN0W119IG9wdGlvbnMgLSBBcnJheSBvZiBvYmplY3QgdG8gc2hvdyBhcyBvcHRpb25zXHJcbiAgICogQHByb3BlcnR5IHsoc3RyaW5nfG51bWJlcil9IG9wdGlvbnNbXS52YWx1ZSAtIFZhbHVlIG9mIHRoZSBvcHRpb25cclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8bnVtYmVyKX0gb3B0aW9uc1tdLmxhYmVsIC0gRGlzcGxheSB0ZXh0IG9mIHRoZSBvcHRpb25cclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2xhYmVsS2V5PWxhYmVsXSAtIEtleSBuYW1lIHRvIGdldCBkaXNwbGF5IHRleHQgZnJvbSBvcHRpb25zIG9iamVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdmFsdWVLZXk9dmFsdWVdIC0gS2V5IG5hbWUgdG8gZ2V0IHZhbHVlIGZyb20gb3B0aW9ucyBvYmplY3RcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Rlcm1zS2V5PXRlcm1zXSAtIEtleSBuYW1lIHRvIGdldCBhcnJheSBvZiBzdHJpbmcgdGVybXMgZnJvbSBvcHRpb25zIG9iamVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW211bHRpcGxlPWZhbHNlXSAtIEVuYWJsZSBtdWx0aXNlbGVjdFxyXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NlYXJjaD1mYWxzZV0gLSBFbmFibGUgc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbaGlkZUNsZWFyQnV0dG9uPWZhbHNlXSAtIEhpZGUgY2xlYXIgYnV0dG9uXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtvcHRpb25zQ291bnQ9NV0gLSBOby5vZiBvcHRpb25zIHRvIHNob3cgb24gdmlld3BvcnRcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW29wdGlvbkhlaWdodD00MHB4XSAtIEhlaWdodCBvZiBlYWNoIGRyb3Bkb3duIG9wdGlvbnNcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW3Bvc2l0aW9uPWF1dG9dIC0gUG9zaXRpb24gb2YgZHJvcGJveCAodG9wLCBib3R0b20sIGF1dG8pXHJcbiAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtwbGFjZWhvbGRlcj1TZWxlY3RdIC0gVGV4dCB0byBzaG93IHdoZW4gbm8gb3B0aW9ucyBzZWxlY3RlZFxyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbm9PcHRpb25zVGV4dD1ObyBvcHRpb25zIGZvdW5kXSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIG9wdGlvbnMgdG8gc2hvd1xyXG4gICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbm9TZWFyY2hSZXN1bHRzVGV4dD1ObyByZXN1bHRzIGZvdW5kXSAtIFRleHQgdG8gc2hvdyB3aGVuIG5vIHJlc3VsdHMgb24gc2VhcmNoXHJcbiAgICogQHByb3BlcnR5IHthcnJheX0gW2Rpc2FibGVkT3B0aW9uc10gLSBPcHRpb25zIHRvIGRpc2FibGUgKGFycmF5IG9mIHZhbHVlcylcclxuICAgKiBAcHJvcGVydHkgeyhzdHJpbmd8YXJyYXkpfSBbc2VsZWN0ZWRWYWx1ZV0gLSBTaW5nbGUgdmFsdWUgb3IgYXJyYXkgb2YgdmFsdWVzIHRvIHNlbGVjdCBvbiBpbml0XHJcbiAgICogQHByb3BlcnR5IHtib29sZWFufSBbc2lsZW50SW5pdGlhbFZhbHVlU2V0PWZhbHNlXSAtIFRvIGF2b2lkIFwiY2hhbmdlIGV2ZW50XCIgdHJpZ2dlciBvbiBzZXR0aW5nIGluaXRpYWwgdmFsdWVcclxuICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2Ryb3Bib3hXaWR0aF0gLSBDdXN0b20gd2lkdGggZm9yIGRyb3Bib3hcclxuICAgKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleD0xXSAtIENTUyB6LWluZGV4IHZhbHVlIGZvciBkcm9wYm94XHJcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IFtub09mRGlzcGxheVZhbHVlcz01MF0gLSBNYXhpbXVtIG5vLm9mIHZhbHVlcyB0byBzaG93IGluIHRoZSB0b29sdGlwIGZvciBtdWx0aS1zZWxlY3RcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbGxvd05ld09wdGlvbj1mYWxzZV0gLSBBbGxvdyB0byBhZGQgbmV3IG9wdGlvbiBieSBzZWFyY2hpbmdcclxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IFttYXJrU2VhcmNoUmVzdWx0cz1mYWxzZV0gLSBNYXJrIG1hdGNoZWQgdGVybSBpbiBsYWJlbFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuc2V0UHJvcHMob3B0aW9ucyk7XHJcbiAgICAgIHRoaXMuc2V0RGlzYWJsZWRPcHRpb25zKG9wdGlvbnMuZGlzYWJsZWRPcHRpb25zKTtcclxuICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMub3B0aW9ucyk7XHJcbiAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRzKCk7XHJcbiAgICAgIHRoaXMuc2V0TWV0aG9kcygpO1xyXG5cclxuICAgICAgaWYgKG9wdGlvbnMuc2VsZWN0ZWRWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWVNZXRob2Qob3B0aW9ucy5zZWxlY3RlZFZhbHVlLCB0aGlzLnNpbGVudEluaXRpYWxWYWx1ZVNldCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS53YXJuKGBDb3VsZG4ndCBpbml0aWF0ZSBWaXJ0dWFsIFNlbGVjdGApO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIHJlbmRlciBtZXRob2RzIC0gc3RhcnQgKi9cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMuJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHdyYXBwZXJDbGFzc2VzID0gJ3ZzY29tcC13cmFwcGVyIGNsb3NlZCc7XHJcbiAgICBsZXQgdmFsdWVUb29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJycsIHRydWUpO1xyXG4gICAgbGV0IGNsZWFyQnV0dG9uVG9vbHRpcCA9IHRoaXMuZ2V0VG9vbHRpcEF0dHJUZXh0KCdDbGVhcicpO1xyXG4gICAgbGV0IG9wdGlvbnNTdHlsZVRleHQgPSB0aGlzLmdldFN0eWxlVGV4dCh7XHJcbiAgICAgICdtYXgtaGVpZ2h0JzogdGhpcy5vcHRpb25zSGVpZ2h0LFxyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IGRyb3Bib3hTdHlsZSA9IHtcclxuICAgICAgJ3otaW5kZXgnOiB0aGlzLnpJbmRleCxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHRoaXMuZHJvcGJveFdpZHRoKSB7XHJcbiAgICAgIGRyb3Bib3hTdHlsZS53aWR0aCA9IHRoaXMuZHJvcGJveFdpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIHdyYXBwZXJDbGFzc2VzICs9ICcgbXVsdGlwbGUnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAndG9wJykge1xyXG4gICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIHBvc2l0aW9uLXRvcCc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLmhpZGVDbGVhckJ1dHRvbikge1xyXG4gICAgICB3cmFwcGVyQ2xhc3NlcyArPSAnIGhhcy1jbGVhci1idXR0b24nO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBodG1sID0gYDxkaXYgY2xhc3M9XCIke3dyYXBwZXJDbGFzc2VzfVwiIHRhYmluZGV4PVwiMFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtdG9nZ2xlLWJ1dHRvblwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC12YWx1ZVwiICR7dmFsdWVUb29sdGlwfT5cclxuICAgICAgICAgICAgJHt0aGlzLnBsYWNlaG9sZGVyfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLWFycm93XCI+PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLWNsZWFyLWJ1dHRvbiB0b2dnbGUtYnV0dG9uLWNoaWxkXCIgJHtjbGVhckJ1dHRvblRvb2x0aXB9PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1kcm9wYm94XCIgJHt0aGlzLmdldFN0eWxlVGV4dChkcm9wYm94U3R5bGUpfT5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLXdyYXBwZXJcIj48L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9ucy1jb250YWluZXJcIiAke29wdGlvbnNTdHlsZVRleHR9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW9wdGlvbnMtbGlzdFwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c2NvbXAtb3B0aW9uc1wiPjwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInZzY29tcC1uby1vcHRpb25zXCI+JHt0aGlzLm5vT3B0aW9uc1RleHR9PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNjb21wLW5vLXNlYXJjaC1yZXN1bHRzXCI+JHt0aGlzLm5vU2VhcmNoUmVzdWx0c1RleHR9PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PmA7XHJcblxyXG4gICAgdGhpcy4kZWxlLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICB0aGlzLiR3cmFwcGVyID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtd3JhcHBlcicpO1xyXG4gICAgdGhpcy4kdG9nZ2xlQnV0dG9uID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtdG9nZ2xlLWJ1dHRvbicpO1xyXG4gICAgdGhpcy4kY2xlYXJCdXR0b24gPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1jbGVhci1idXR0b24nKTtcclxuICAgIHRoaXMuJGRyb3Bib3ggPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1kcm9wYm94Jyk7XHJcbiAgICB0aGlzLiRzZWFyY2ggPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1zZWFyY2gtd3JhcHBlcicpO1xyXG4gICAgdGhpcy4kb3B0aW9uc0NvbnRhaW5lciA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbnMtY29udGFpbmVyJyk7XHJcbiAgICB0aGlzLiRvcHRpb25zTGlzdCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbnMtbGlzdCcpO1xyXG4gICAgdGhpcy4kb3B0aW9ucyA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbnMnKTtcclxuICAgIHRoaXMuJHZhbHVlVGV4dCA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLXZhbHVlJyk7XHJcblxyXG4gICAgdGhpcy5hZGRDbGFzcyh0aGlzLiRlbGUsICd2c2NvbXAtZWxlJyk7XHJcbiAgICB0aGlzLnJlbmRlclNlYXJjaCgpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJPcHRpb25zKCkge1xyXG4gICAgbGV0IGh0bWwgPSAnJztcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIGxldCBjaGVja2JveEh0bWwgPSAnJztcclxuICAgIGxldCBuZXdPcHRpb25JY29uSHRtbCA9ICcnO1xyXG4gICAgbGV0IHN0eWxlVGV4dCA9IHRoaXMuZ2V0U3R5bGVUZXh0KHtcclxuICAgICAgaGVpZ2h0OiB0aGlzLm9wdGlvbkhlaWdodCArICdweCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xyXG4gICAgICBjaGVja2JveEh0bWwgPSAnPHNwYW4gY2xhc3M9XCJjaGVja2JveC1pY29uXCI+PC9zcGFuPic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgbGV0IG5ld09wdGlvblRvb2x0aXAgPSB0aGlzLmdldFRvb2x0aXBBdHRyVGV4dCgnTmV3IE9wdGlvbicpO1xyXG4gICAgICBuZXdPcHRpb25JY29uSHRtbCA9IGA8c3BhbiBjbGFzcz1cInZzY29tcC1uZXctb3B0aW9uLWljb25cIiAke25ld09wdGlvblRvb2x0aXB9Pjwvc3Bhbj5gO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2libGVPcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgbGV0IG9wdGlvbkxhYmVsID0gZC5sYWJlbDtcclxuICAgICAgbGV0IG9wdGlvbkNsYXNzZXMgPSAndnNjb21wLW9wdGlvbic7XHJcbiAgICAgIGxldCBvcHRpb25Ub29sdGlwID0gdGhpcy5nZXRUb29sdGlwQXR0clRleHQoJycsIHRydWUpO1xyXG4gICAgICBsZXQgcmlnaHRTZWN0aW9uID0gJyc7XHJcblxyXG4gICAgICBpZiAoZC5pc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIHNlbGVjdGVkJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNGb2N1c2VkKSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGZvY3VzZWQnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZC5pc0Rpc2FibGVkKSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGRpc2FibGVkJztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgb3B0aW9uQ2xhc3NlcyArPSAnIGN1cnJlbnQtbmV3JztcclxuICAgICAgICByaWdodFNlY3Rpb24gKz0gbmV3T3B0aW9uSWNvbkh0bWw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCIke29wdGlvbkNsYXNzZXN9XCIgZGF0YS12YWx1ZT1cIiR7ZC52YWx1ZX1cIiBkYXRhLWluZGV4PVwiJHtkLmluZGV4fVwiIGRhdGEtdmlzaWJsZS1pbmRleD1cIiR7ZC52aXNpYmxlSW5kZXh9XCIgJHtzdHlsZVRleHR9PlxyXG4gICAgICAgICAgJHtjaGVja2JveEh0bWx9XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1vcHRpb24tdGV4dFwiICR7b3B0aW9uVG9vbHRpcH0+XHJcbiAgICAgICAgICAgICR7b3B0aW9uTGFiZWx9XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAke3JpZ2h0U2VjdGlvbn1cclxuICAgICAgICA8L2Rpdj5gO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy4kb3B0aW9ucy5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgbGV0IGhhc05vT3B0aW9ucyA9ICF0aGlzLm9wdGlvbnMubGVuZ3RoO1xyXG4gICAgbGV0IGhhc05vU2VhcmNoUmVzdWx0cyA9ICFoYXNOb09wdGlvbnMgJiYgIXZpc2libGVPcHRpb25zLmxlbmd0aDtcclxuXHJcbiAgICBpZiAoIXRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgdGhpcy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAnaGFzLW5vLXNlYXJjaC1yZXN1bHRzJywgaGFzTm9TZWFyY2hSZXN1bHRzKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtbm8tb3B0aW9ucycsIGhhc05vT3B0aW9ucyk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNQb3NpdGlvbigpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zVG9vbHRpcCgpO1xyXG4gICAgdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyU2VhcmNoKCkge1xyXG4gICAgaWYgKCF0aGlzLmhhc1NlYXJjaCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNoZWNrYm94SHRtbCA9ICcnO1xyXG5cclxuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIGNoZWNrYm94SHRtbCA9ICc8c3BhbiBjbGFzcz1cImNoZWNrYm94LWljb24gdG9nZ2xlLWFsbC1vcHRpb25zXCI+PC9zcGFuPic7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGh0bWwgPSBgPGRpdiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY29udGFpbmVyXCI+XHJcbiAgICAgICAgJHtjaGVja2JveEh0bWx9XHJcbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJ2c2NvbXAtc2VhcmNoLWlucHV0XCIgcGxhY2Vob2xkZXI9XCJTZWFyY2guLi5cIj5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cInZzY29tcC1zZWFyY2gtY2xlYXJcIj4mdGltZXM7PC9zcGFuPlxyXG4gICAgICA8L2Rpdj5gO1xyXG5cclxuICAgIHRoaXMuJHNlYXJjaC5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgdGhpcy4kc2VhcmNoSW5wdXQgPSB0aGlzLiRlbGUucXVlcnlTZWxlY3RvcignLnZzY29tcC1zZWFyY2gtaW5wdXQnKTtcclxuICAgIHRoaXMuJHNlYXJjaENsZWFyID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtc2VhcmNoLWNsZWFyJyk7XHJcbiAgICB0aGlzLiR0b2dnbGVBbGxPcHRpb25zID0gdGhpcy4kZWxlLnF1ZXJ5U2VsZWN0b3IoJy50b2dnbGUtYWxsLW9wdGlvbnMnKTtcclxuXHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHNlYXJjaElucHV0LCAna2V5dXAgY2hhbmdlJywgJ29uU2VhcmNoJyk7XHJcbiAgICB0aGlzLmFkZEV2ZW50KHRoaXMuJHNlYXJjaENsZWFyLCAnY2xpY2snLCAnb25TZWFyY2hDbGVhcicpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR0b2dnbGVBbGxPcHRpb25zLCAnY2xpY2snLCAnb25Ub2dnbGVBbGxPcHRpb25zJyk7XHJcbiAgfVxyXG4gIC8qKiByZW5kZXIgbWV0aG9kcyAtIGVuZCAqL1xyXG5cclxuICAvKiogZXZlbnQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgYWRkRXZlbnRzKCkge1xyXG4gICAgdGhpcy5hZGRFdmVudChkb2N1bWVudCwgJ2NsaWNrJywgJ29uRG9jdW1lbnRDbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiR3cmFwcGVyLCAna2V5ZG93bicsICdvbktleURvd24nKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kdG9nZ2xlQnV0dG9uLCAnY2xpY2snLCAnb25Ub2dnbGVCdXR0b25DbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRjbGVhckJ1dHRvbiwgJ2NsaWNrJywgJ29uQ2xlYXJCdXR0b25DbGljaycpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zQ29udGFpbmVyLCAnc2Nyb2xsJywgJ29uT3B0aW9uc1Njcm9sbCcpO1xyXG4gICAgdGhpcy5hZGRFdmVudCh0aGlzLiRvcHRpb25zLCAnY2xpY2snLCAnb25PcHRpb25zQ2xpY2snKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ21vdXNlb3ZlcicsICdvbk9wdGlvbnNNb3VzZU92ZXInKTtcclxuICAgIHRoaXMuYWRkRXZlbnQodGhpcy4kb3B0aW9ucywgJ3RvdWNobW92ZScsICdvbk9wdGlvbnNUb3VjaE1vdmUnKTtcclxuICB9XHJcblxyXG4gIGFkZEV2ZW50KCRlbGUsIGV2ZW50cywgbWV0aG9kKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50cyA9IHRoaXMucmVtb3ZlQXJyYXlFbXB0eShldmVudHMuc3BsaXQoJyAnKSk7XHJcblxyXG4gICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XHJcbiAgICAgIGxldCBldmVudHNLZXkgPSBgJHttZXRob2R9LSR7ZXZlbnR9YDtcclxuICAgICAgbGV0IGNhbGxiYWNrID0gdGhpcy5ldmVudHNbZXZlbnRzS2V5XTtcclxuXHJcbiAgICAgIGlmICghY2FsbGJhY2spIHtcclxuICAgICAgICBjYWxsYmFjayA9IHRoaXNbbWV0aG9kXS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50c0tleV0gPSBjYWxsYmFjaztcclxuICAgICAgfVxyXG5cclxuICAgICAgJGVsZSA9IHRoaXMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgICAkZWxlLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgICAgX3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzcGF0Y2hFdmVudCgkZWxlLCBldmVudE5hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZSA9IHRoaXMuZ2V0RWxlbWVudHMoJGVsZSk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICRlbGUuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgICBfdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChldmVudE5hbWUsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBvbkRvY3VtZW50Q2xpY2soZSkge1xyXG4gICAgVmlydHVhbFNlbGVjdC5jbG9zZUFsbERyb3Bib3goZS50YXJnZXQuY2xvc2VzdCgnLnZzY29tcC13cmFwcGVyJykpO1xyXG4gIH1cclxuXHJcbiAgb25LZXlEb3duKGUpIHtcclxuICAgIGxldCBrZXkgPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcclxuICAgIGxldCBtZXRob2QgPSBrZXlEb3duTWV0aG9kTWFwcGluZ1trZXldO1xyXG5cclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgdGhpc1ttZXRob2RdKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25FbnRlclByZXNzKCkge1xyXG4gICAgaWYgKCF0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RGb2N1c2VkT3B0aW9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkVzY1ByZXNzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Eb3duQXJyb3dQcmVzcyhlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKCduZXh0Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9wZW5Ecm9wYm94KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblVwQXJyb3dQcmVzcyhlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNPcGVuZWQoKSkge1xyXG4gICAgICB0aGlzLmZvY3VzT3B0aW9uKCdwcmV2aW91cycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5vcGVuRHJvcGJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Ub2dnbGVCdXR0b25DbGljayhlKSB7XHJcbiAgICBsZXQgY2hpbGRFbGUgPSBlLnRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLWJ1dHRvbi1jaGlsZCcpO1xyXG5cclxuICAgIGlmIChjaGlsZEVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2dnbGVEcm9wYm94KCk7XHJcbiAgfVxyXG5cclxuICBvbkNsZWFyQnV0dG9uQ2xpY2soKSB7XHJcbiAgICB0aGlzLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNTY3JvbGwoKSB7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBvbk9wdGlvbnNDbGljayhlKSB7XHJcbiAgICB0aGlzLnNlbGVjdE9wdGlvbihlLnRhcmdldC5jbG9zZXN0KCcudnNjb21wLW9wdGlvbjpub3QoLmRpc2FibGVkKScpKTtcclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc01vdXNlT3ZlcihlKSB7XHJcbiAgICBsZXQgJGVsZSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy52c2NvbXAtb3B0aW9uOm5vdCguZGlzYWJsZWQpJyk7XHJcblxyXG4gICAgaWYgKCRlbGUpIHtcclxuICAgICAgdGhpcy5mb2N1c09wdGlvbihudWxsLCAkZWxlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uT3B0aW9uc1RvdWNoTW92ZSgpIHtcclxuICAgIHRoaXMucmVtb3ZlT3B0aW9uRm9jdXMoKTtcclxuICB9XHJcblxyXG4gIG9uU2VhcmNoKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLnNldFNlYXJjaFZhbHVlKGUudGFyZ2V0LnZhbHVlLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIG9uU2VhcmNoQ2xlYXIoKSB7XHJcbiAgICB0aGlzLnNldFNlYXJjaFZhbHVlKCcnKTtcclxuICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gIH1cclxuXHJcbiAgb25Ub2dnbGVBbGxPcHRpb25zKCkge1xyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zKCk7XHJcbiAgfVxyXG4gIC8qKiBldmVudCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBzZXQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgc2V0UHJvcHMob3B0aW9ucykge1xyXG4gICAgb3B0aW9ucyA9IHRoaXMuc2V0RGVmYXVsdFByb3BzKG9wdGlvbnMpO1xyXG4gICAgdGhpcy5zZXRQcm9wc0Zyb21FbGVtZW50QXR0cihvcHRpb25zKTtcclxuXHJcbiAgICB0aGlzLiRlbGUgPSBvcHRpb25zLmVsZTtcclxuICAgIHRoaXMubGFiZWxLZXkgPSBvcHRpb25zLmxhYmVsS2V5O1xyXG4gICAgdGhpcy52YWx1ZUtleSA9IG9wdGlvbnMudmFsdWVLZXk7XHJcbiAgICB0aGlzLnRlcm1zS2V5ID0gb3B0aW9ucy50ZXJtc0tleTtcclxuICAgIHRoaXMub3B0aW9uc0NvdW50ID0gcGFyc2VJbnQob3B0aW9ucy5vcHRpb25zQ291bnQpO1xyXG4gICAgdGhpcy5oYWxmT3B0aW9uc0NvdW50ID0gTWF0aC5jZWlsKHRoaXMub3B0aW9uc0NvdW50IC8gMik7XHJcbiAgICB0aGlzLm9wdGlvbkhlaWdodFRleHQgPSBvcHRpb25zLm9wdGlvbkhlaWdodDtcclxuICAgIHRoaXMub3B0aW9uSGVpZ2h0ID0gcGFyc2VGbG9hdCh0aGlzLm9wdGlvbkhlaWdodFRleHQpO1xyXG4gICAgdGhpcy5tdWx0aXBsZSA9IHRoaXMuY29udmVydFRvQm9vbGVhbihvcHRpb25zLm11bHRpcGxlKTtcclxuICAgIHRoaXMuaGFzU2VhcmNoID0gdGhpcy5jb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuc2VhcmNoKTtcclxuICAgIHRoaXMuaGlkZUNsZWFyQnV0dG9uID0gdGhpcy5jb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuaGlkZUNsZWFyQnV0dG9uKTtcclxuICAgIHRoaXMuc2lsZW50SW5pdGlhbFZhbHVlU2V0ID0gdGhpcy5jb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMuc2lsZW50SW5pdGlhbFZhbHVlU2V0KTtcclxuICAgIHRoaXMuYWxsb3dOZXdPcHRpb24gPSB0aGlzLmNvbnZlcnRUb0Jvb2xlYW4ob3B0aW9ucy5hbGxvd05ld09wdGlvbik7XHJcbiAgICB0aGlzLm1hcmtTZWFyY2hSZXN1bHRzID0gdGhpcy5jb252ZXJ0VG9Cb29sZWFuKG9wdGlvbnMubWFya1NlYXJjaFJlc3VsdHMpO1xyXG4gICAgdGhpcy5ub09wdGlvbnNUZXh0ID0gb3B0aW9ucy5ub09wdGlvbnNUZXh0O1xyXG4gICAgdGhpcy5ub1NlYXJjaFJlc3VsdHNUZXh0ID0gb3B0aW9ucy5ub1NlYXJjaFJlc3VsdHNUZXh0O1xyXG4gICAgdGhpcy5wbGFjZWhvbGRlciA9IG9wdGlvbnMucGxhY2Vob2xkZXI7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbjtcclxuICAgIHRoaXMuZHJvcGJveFdpZHRoID0gb3B0aW9ucy5kcm9wYm94V2lkdGg7XHJcbiAgICB0aGlzLm5vT2ZEaXNwbGF5VmFsdWVzID0gcGFyc2VJbnQob3B0aW9ucy5ub09mRGlzcGxheVZhbHVlcyk7XHJcbiAgICB0aGlzLnpJbmRleCA9IHBhcnNlSW50KG9wdGlvbnMuekluZGV4KTtcclxuICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcclxuICAgIHRoaXMuZXZlbnRzID0ge307XHJcbiAgICB0aGlzLnRvb2x0aXBFbnRlckRlbGF5ID0gMjAwO1xyXG4gICAgdGhpcy50cmFuc2l0aW9uRHVyYXRpb24gPSAyNTA7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlID0gJyc7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwgPSAnJztcclxuICAgIHRoaXMuaXNBbGxTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5vcHRpb25zSGVpZ2h0ID0gdGhpcy5vcHRpb25zQ291bnQgKiB0aGlzLm9wdGlvbkhlaWdodCArICdweCc7XHJcblxyXG4gICAgaWYgKChvcHRpb25zLnNlYXJjaCA9PT0gdW5kZWZpbmVkICYmIHRoaXMubXVsdGlwbGUpIHx8IHRoaXMuYWxsb3dOZXdPcHRpb24pIHtcclxuICAgICAgdGhpcy5oYXNTZWFyY2ggPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RGVmYXVsdFByb3BzKG9wdGlvbnMpIHtcclxuICAgIGxldCBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgbGFiZWxLZXk6ICdsYWJlbCcsXHJcbiAgICAgIHZhbHVlS2V5OiAndmFsdWUnLFxyXG4gICAgICB0ZXJtc0tleTogJ3Rlcm1zJyxcclxuICAgICAgb3B0aW9uc0NvdW50OiA1LFxyXG4gICAgICBub09mRGlzcGxheVZhbHVlczogNTAsXHJcbiAgICAgIG9wdGlvbkhlaWdodDogJzQwcHgnLFxyXG4gICAgICBtdWx0aXBsZTogZmFsc2UsXHJcbiAgICAgIGhpZGVDbGVhckJ1dHRvbjogZmFsc2UsXHJcbiAgICAgIHNpbGVudEluaXRpYWxWYWx1ZVNldDogZmFsc2UsXHJcbiAgICAgIG5vT3B0aW9uc1RleHQ6ICdObyBvcHRpb25zIGZvdW5kJyxcclxuICAgICAgbm9TZWFyY2hSZXN1bHRzVGV4dDogJ05vIHJlc3VsdHMgZm91bmQnLFxyXG4gICAgICBwbGFjZWhvbGRlcjogJ1NlbGVjdCcsXHJcbiAgICAgIHBvc2l0aW9uOiAnYXV0bycsXHJcbiAgICAgIHpJbmRleDogMSxcclxuICAgICAgYWxsb3dOZXdPcHRpb246IGZhbHNlLFxyXG4gICAgICBtYXJrU2VhcmNoUmVzdWx0czogZmFsc2UsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHNldFByb3BzRnJvbUVsZW1lbnRBdHRyKG9wdGlvbnMpIHtcclxuICAgIGxldCAkZWxlID0gb3B0aW9ucy5lbGU7XHJcbiAgICBsZXQgbWFwcGluZyA9IHtcclxuICAgICAgbXVsdGlwbGU6ICdtdWx0aXBsZScsXHJcbiAgICAgIHBsYWNlaG9sZGVyOiAncGxhY2Vob2xkZXInLFxyXG4gICAgICAnZGF0YS1sYWJlbC1rZXknOiAnbGFiZWxLZXknLFxyXG4gICAgICAnZGF0YS12YWx1ZS1rZXknOiAndmFsdWVLZXknLFxyXG4gICAgICAnZGF0YS10ZXJtcy1rZXknOiAndGVybXNLZXknLFxyXG4gICAgICAnZGF0YS1zZWFyY2gnOiAnc2VhcmNoJyxcclxuICAgICAgJ2RhdGEtaGlkZS1jbGVhci1idXR0b24nOiAnaGlkZUNsZWFyQnV0dG9uJyxcclxuICAgICAgJ2RhdGEtb3B0aW9ucy1jb3VudCc6ICdvcHRpb25zQ291bnQnLFxyXG4gICAgICAnZGF0YS1vcHRpb24taGVpZ2h0JzogJ29wdGlvbkhlaWdodCcsXHJcbiAgICAgICdkYXRhLXBvc2l0aW9uJzogJ3Bvc2l0aW9uJyxcclxuICAgICAgJ2RhdGEtbm8tb3B0aW9ucy10ZXh0JzogJ25vT3B0aW9uc1RleHQnLFxyXG4gICAgICAnZGF0YS1uby1zZWFyY2gtcmVzdWx0cy10ZXh0JzogJ25vU2VhcmNoUmVzdWx0c1RleHQnLFxyXG4gICAgICAnZGF0YS1zaWxlbnQtaW5pdGlhbC12YWx1ZS1zZXQnOiAnc2lsZW50SW5pdGlhbFZhbHVlU2V0JyxcclxuICAgICAgJ2RhdGEtZHJvcGJveC13aWR0aCc6ICdkcm9wYm94V2lkdGgnLFxyXG4gICAgICAnZGF0YS16LWluZGV4JzogJ3pJbmRleCcsXHJcbiAgICAgICdkYXRhLW5vLW9mLWRpc3BsYXktdmFsdWVzJzogJ25vT2ZEaXNwbGF5VmFsdWVzJyxcclxuICAgICAgJ2RhdGEtYWxsb3ctbmV3LW9wdGlvbic6ICdhbGxvd05ld09wdGlvbicsXHJcbiAgICAgICdkYXRhLW1hcmstc2VhcmNoLXJlc3VsdHMnOiAnbWFya1NlYXJjaFJlc3VsdHMnLFxyXG4gICAgfTtcclxuXHJcbiAgICBmb3IgKGxldCBrIGluIG1hcHBpbmcpIHtcclxuICAgICAgbGV0IHZhbHVlID0gJGVsZS5nZXRBdHRyaWJ1dGUoayk7XHJcblxyXG4gICAgICBpZiAoayA9PT0gJ211bHRpcGxlJyAmJiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSAndHJ1ZScpKSB7XHJcbiAgICAgICAgdmFsdWUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICBvcHRpb25zW21hcHBpbmdba11dID0gdmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE1ldGhvZHMoKSB7XHJcbiAgICBsZXQgJGVsZSA9IHRoaXMuJGVsZTtcclxuICAgICRlbGUudmlydHVhbFNlbGVjdCA9IHRoaXM7XHJcbiAgICAkZWxlLnZhbHVlID0gdGhpcy5tdWx0aXBsZSA/IFtdIDogJyc7XHJcbiAgICAkZWxlLnJlc2V0ID0gVmlydHVhbFNlbGVjdC5yZXNldDtcclxuICAgICRlbGUuc2V0VmFsdWUgPSBWaXJ0dWFsU2VsZWN0LnNldFZhbHVlTWV0aG9kO1xyXG4gICAgJGVsZS5zZXRPcHRpb25zID0gVmlydHVhbFNlbGVjdC5zZXRPcHRpb25zTWV0aG9kO1xyXG4gICAgJGVsZS5zZXREaXNhYmxlZE9wdGlvbnMgPSBWaXJ0dWFsU2VsZWN0LnNldERpc2FibGVkT3B0aW9uc01ldGhvZDtcclxuICAgICRlbGUudG9nZ2xlU2VsZWN0QWxsID0gVmlydHVhbFNlbGVjdC50b2dnbGVTZWxlY3RBbGw7XHJcbiAgICAkZWxlLmlzQWxsU2VsZWN0ZWQgPSBWaXJ0dWFsU2VsZWN0LmlzQWxsU2VsZWN0ZWQ7XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZU1ldGhvZCh2YWx1ZSwgc2lsZW50Q2hhbmdlKSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIHZhbHVlID0gW3ZhbHVlXTtcclxuICAgIH1cclxuXHJcbiAgICB2YWx1ZSA9IHZhbHVlLm1hcCgodikgPT4ge1xyXG4gICAgICByZXR1cm4gdiB8fCB2ID09IDAgPyB2LnRvU3RyaW5nKCkgOiAnJztcclxuICAgIH0pO1xyXG5cclxuICAgIGxldCB2YWxpZFZhbHVlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGxldCBpc1NlbGVjdGVkID0gdmFsdWUuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTE7XHJcblxyXG4gICAgICBpZiAoaXNTZWxlY3RlZCAmJiAhZC5pc0Rpc2FibGVkKSB7XHJcbiAgICAgICAgZC5pc1NlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB2YWxpZFZhbHVlcy5wdXNoKGQudmFsdWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGQuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIXRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgdmFsaWRWYWx1ZXMgPSB2YWxpZFZhbHVlc1swXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFZhbHVlKHZhbGlkVmFsdWVzLCAhc2lsZW50Q2hhbmdlKTtcclxuICAgIHRoaXMuYWZ0ZXJWYWx1ZVNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc01ldGhvZChvcHRpb25zKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICB0aGlzLnNldE9wdGlvbnNIZWlnaHQoKTtcclxuICAgIHRoaXMuc2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuICAgIHRoaXMucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkT3B0aW9uc01ldGhvZChkaXNhYmxlZE9wdGlvbnMpIHtcclxuICAgIHRoaXMuc2V0RGlzYWJsZWRPcHRpb25zKGRpc2FibGVkT3B0aW9ucywgdHJ1ZSk7XHJcbiAgICB0aGlzLnNldFZhbHVlTWV0aG9kKG51bGwpO1xyXG4gICAgdGhpcy5zZXRWaXNpYmxlT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRPcHRpb25zKGRpc2FibGVkT3B0aW9ucyA9IFtdLCBzZXRPcHRpb25zUHJvcCA9IGZhbHNlKSB7XHJcbiAgICBkaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnMubWFwKChkKSA9PiBkLnRvU3RyaW5nKCkpO1xyXG4gICAgdGhpcy5kaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnM7XHJcblxyXG4gICAgaWYgKHNldE9wdGlvbnNQcm9wICYmIGRpc2FibGVkT3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGQpID0+IHtcclxuICAgICAgICBkLmlzRGlzYWJsZWQgPSBkaXNhYmxlZE9wdGlvbnMuaW5kZXhPZihkLnZhbHVlKSAhPT0gLTE7XHJcblxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnMob3B0aW9ucykge1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgIG9wdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZGlzYWJsZWRPcHRpb25zID0gdGhpcy5kaXNhYmxlZE9wdGlvbnM7XHJcbiAgICBsZXQgaGFzRGlzYWJsZWRPcHRpb25zID0gZGlzYWJsZWRPcHRpb25zLmxlbmd0aDtcclxuICAgIGxldCBsYWJlbEtleSA9IHRoaXMubGFiZWxLZXk7XHJcbiAgICBsZXQgdmFsdWVLZXkgPSB0aGlzLnZhbHVlS2V5O1xyXG4gICAgbGV0IHRlcm1zS2V5ID0gdGhpcy50ZXJtc0tleTtcclxuICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCA9IG9wdGlvbnMubGVuZ3RoO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMubWFwKChkLCBpKSA9PiB7XHJcbiAgICAgIGxldCB2YWx1ZSA9IChkW3ZhbHVlS2V5XSB8fCAnJykudG9TdHJpbmcoKTtcclxuICAgICAgbGV0IG9wdGlvbiA9IHtcclxuICAgICAgICBpbmRleDogaSxcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBsYWJlbDogZFtsYWJlbEtleV0gfHwgJycsXHJcbiAgICAgICAgaXNWaXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIHRlcm1zOiBBcnJheS5pc0FycmF5KGRbdGVybXNLZXldKSA/IGRbdGVybXNLZXldIDogW10sXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBpZiAoaGFzRGlzYWJsZWRPcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9uLmlzRGlzYWJsZWQgPSBkaXNhYmxlZE9wdGlvbnMuaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gb3B0aW9uO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5sYXN0T3B0aW9uSW5kZXggPSB0aGlzLm9wdGlvbnMubGVuZ3RoIC0gMTtcclxuICB9XHJcblxyXG4gIHNldFZpc2libGVPcHRpb25zKCkge1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25zID0gWy4uLnRoaXMub3B0aW9uc107XHJcbiAgICBsZXQgbWF4T3B0aW9uc1RvU2hvdyA9IHRoaXMub3B0aW9uc0NvdW50ICogMjtcclxuICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5nZXRWaXNpYmxlU3RhcnRJbmRleCgpO1xyXG4gICAgbGV0IG5ld09wdGlvbiA9IHRoaXMuZ2V0TmV3T3B0aW9uKCk7XHJcbiAgICBsZXQgZW5kSW5kZXggPSBzdGFydEluZGV4ICsgbWF4T3B0aW9uc1RvU2hvdyAtIDE7XHJcbiAgICBsZXQgaSA9IDA7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICBuZXdPcHRpb24udmlzaWJsZUluZGV4ID0gaTtcclxuICAgICAgaSsrO1xyXG4gICAgfVxyXG5cclxuICAgIHZpc2libGVPcHRpb25zID0gdmlzaWJsZU9wdGlvbnMuZmlsdGVyKChkKSA9PiB7XHJcbiAgICAgIGxldCBpblZpZXcgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmIChkLmlzVmlzaWJsZSAmJiAhZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICBpblZpZXcgPSBpID49IHN0YXJ0SW5kZXggJiYgaSA8PSBlbmRJbmRleDtcclxuICAgICAgICBkLnZpc2libGVJbmRleCA9IGk7XHJcbiAgICAgICAgaSsrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gaW5WaWV3O1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKG5ld09wdGlvbikge1xyXG4gICAgICB2aXNpYmxlT3B0aW9ucyA9IFtuZXdPcHRpb24sIC4uLnZpc2libGVPcHRpb25zXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZpc2libGVPcHRpb25zID0gdmlzaWJsZU9wdGlvbnM7XHJcbiAgICB0aGlzLnJlbmRlck9wdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIHNldE9wdGlvbnNQb3NpdGlvbihzdGFydEluZGV4KSB7XHJcbiAgICBpZiAoc3RhcnRJbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHN0YXJ0SW5kZXggPSB0aGlzLmdldFZpc2libGVTdGFydEluZGV4KCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRvcCA9IHN0YXJ0SW5kZXggKiB0aGlzLm9wdGlvbkhlaWdodDtcclxuICAgIHRoaXMuJG9wdGlvbnMuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKDAsICR7dG9wfXB4LCAwKWA7XHJcbiAgICB0aGlzLnNldERhdGEodGhpcy4kb3B0aW9ucywgJ3RvcCcsIHRvcCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25zVG9vbHRpcCgpIHtcclxuICAgIGxldCB2aXNpYmxlT3B0aW9ucyA9IHRoaXMuZ2V0VmlzaWJsZU9wdGlvbnMoKTtcclxuXHJcbiAgICB2aXNpYmxlT3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGxldCAkb3B0aW9uRWxlID0gdGhpcy4kZHJvcGJveC5xdWVyeVNlbGVjdG9yKGAudnNjb21wLW9wdGlvbltkYXRhLWluZGV4PVwiJHtkLmluZGV4fVwiXSAudnNjb21wLW9wdGlvbi10ZXh0YCk7XHJcblxyXG4gICAgICB0aGlzLnNldERhdGEoJG9wdGlvbkVsZSwgJ3Rvb2x0aXAnLCBkLmxhYmVsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWUodmFsdWUsIHRyaWdnZXJFdmVudCkge1xyXG4gICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gW107XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZXMgPSBbLi4udmFsdWVdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IFt2YWx1ZV07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy4kZWxlLnZhbHVlID0gdGhpcy5tdWx0aXBsZSA/IHRoaXMuc2VsZWN0ZWRWYWx1ZXMgOiB0aGlzLnNlbGVjdGVkVmFsdWVzWzBdIHx8ICcnO1xyXG4gICAgdGhpcy5zZXRWYWx1ZVRleHQoKTtcclxuICAgIHRoaXMudG9nZ2xlQ2xhc3ModGhpcy4kd3JhcHBlciwgJ2hhcy12YWx1ZScsIHRoaXMuaXNOb3RFbXB0eSh0aGlzLnNlbGVjdGVkVmFsdWVzKSk7XHJcblxyXG4gICAgaWYgKHRyaWdnZXJFdmVudCkge1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy4kZWxlLCAnY2hhbmdlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRWYWx1ZVRleHQoKSB7XHJcbiAgICBsZXQgdmFsdWVUZXh0ID0gW107XHJcbiAgICBsZXQgdmFsdWVUb29sdGlwID0gW107XHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZSA9IHRoaXMuc2VsZWN0ZWRWYWx1ZXM7XHJcbiAgICBsZXQgbm9PZkRpc3BsYXlWYWx1ZXMgPSB0aGlzLm5vT2ZEaXNwbGF5VmFsdWVzO1xyXG4gICAgbGV0IG1heGltdW1WYWx1ZXNUb1Nob3cgPSA1MDtcclxuICAgIGxldCBzZWxlY3RlZFZhbHVlc0NvdW50ID0gMDtcclxuXHJcbiAgICBmb3IgKGxldCBkIG9mIHRoaXMub3B0aW9ucykge1xyXG4gICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHNlbGVjdGVkVmFsdWVzQ291bnQgPiBtYXhpbXVtVmFsdWVzVG9TaG93KSB7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB2YWx1ZSA9IGQudmFsdWU7XHJcblxyXG4gICAgICBpZiAoc2VsZWN0ZWRWYWx1ZS5pbmRleE9mKHZhbHVlKSAhPT0gLTEpIHtcclxuICAgICAgICBsZXQgbGFiZWwgPSBkLmxhYmVsO1xyXG4gICAgICAgIHZhbHVlVGV4dC5wdXNoKGxhYmVsKTtcclxuICAgICAgICBzZWxlY3RlZFZhbHVlc0NvdW50Kys7XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlc0NvdW50IDw9IG5vT2ZEaXNwbGF5VmFsdWVzKSB7XHJcbiAgICAgICAgICB2YWx1ZVRvb2x0aXAucHVzaChgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdmFsdWUtdGFnXCI+JHtsYWJlbH08L3NwYW4+YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1vcmVTZWxlY3RlZE9wdGlvbnMgPSBzZWxlY3RlZFZhbHVlLmxlbmd0aCAtIG5vT2ZEaXNwbGF5VmFsdWVzO1xyXG5cclxuICAgIGlmIChtb3JlU2VsZWN0ZWRPcHRpb25zID4gMCkge1xyXG4gICAgICB2YWx1ZVRvb2x0aXAucHVzaChgPHNwYW4gY2xhc3M9XCJ2c2NvbXAtdmFsdWUtdGFnXCI+KyAke21vcmVTZWxlY3RlZE9wdGlvbnN9IG1vcmUuLi48L3NwYW4+YCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy4kdmFsdWVUZXh0LmlubmVySFRNTCA9IHZhbHVlVGV4dC5qb2luKCcsICcpIHx8IHRoaXMucGxhY2Vob2xkZXI7XHJcbiAgICB0aGlzLnNldERhdGEodGhpcy4kdmFsdWVUZXh0LCAndG9vbHRpcCcsIHZhbHVlVG9vbHRpcC5qb2luKCcsICcpKTtcclxuICB9XHJcblxyXG4gIHNldFNlYXJjaFZhbHVlKHZhbHVlLCBza2lwSW5wdXRTZXQpIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXNraXBJbnB1dFNldCkge1xyXG4gICAgICB0aGlzLiRzZWFyY2hJbnB1dC52YWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1hcmtTZWFyY2hSZXN1bHRzID0gdGhpcy5tYXJrU2VhcmNoUmVzdWx0cztcclxuICAgIGxldCBzZWFyY2hWYWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG4gICAgbGV0IHZpc2libGVPcHRpb25zQ291bnQgPSAwO1xyXG4gICAgbGV0IGhhc0V4YWN0T3B0aW9uID0gZmFsc2U7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlID0gc2VhcmNoVmFsdWU7XHJcbiAgICB0aGlzLnNlYXJjaFZhbHVlT3JpZ2luYWwgPSB2YWx1ZTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0N1cnJlbnROZXcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChtYXJrU2VhcmNoUmVzdWx0cykge1xyXG4gICAgICAgIC8qKiByZW1vdmUgcHJldmlvdXMgbW9kaWZpY2F0aW9ucyB0byB0aGUgbGFiZWwgKi9cclxuICAgICAgICBkLmxhYmVsID0gZC5sYWJlbC5yZXBsYWNlKC88XFwvKm1hcms+L2csICcnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdmFsdWUgPSBkLmxhYmVsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3QgbWF0Y2hlZExhYmVsID0gdmFsdWUuaW5kZXhPZihzZWFyY2hWYWx1ZSkgIT09IC0xO1xyXG4gICAgICBjb25zdCBtYXRjaGVkVGVybXMgPSBtYXRjaGVkTGFiZWwgPyBmYWxzZSA6IGQudGVybXMuc29tZSh4ID0+IHguaW5kZXhPZihzZWFyY2hWYWx1ZSkgIT09IC0xKTtcclxuICAgICAgbGV0IGlzVmlzaWJsZSA9IG1hdGNoZWRMYWJlbCB8fCBtYXRjaGVkVGVybXM7XHJcbiAgICAgIGQuaXNWaXNpYmxlID0gaXNWaXNpYmxlO1xyXG5cclxuICAgICAgaWYgKGlzVmlzaWJsZSkge1xyXG4gICAgICAgIHZpc2libGVPcHRpb25zQ291bnQrKztcclxuICAgICAgICBpZiAobWFya1NlYXJjaFJlc3VsdHMpIHtcclxuICAgICAgICAgIGlmIChtYXRjaGVkTGFiZWwpIHtcclxuICAgICAgICAgICAgZC5sYWJlbCA9IGQubGFiZWwucmVwbGFjZShuZXcgUmVnRXhwKGAoJHtzZWFyY2hWYWx1ZX0pYCwgJ2dpJyksIGA8bWFyaz4kMTwvbWFyaz5gKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hlZFRlcm1zKSB7XHJcbiAgICAgICAgICAgIC8qKiBpZiB3ZSBkaWRuJ3QgbWF0Y2ggdGhlIGxhYmVsIGJ1dCBtYXRjaGVkIGFueSBvZiB0aGUgdGVybXMgbWFyayB0aGUgZW50aXJlIGxhYmVsICovXHJcbiAgICAgICAgICAgIGQubGFiZWwgPSBgPG1hcms+JHtkLmxhYmVsfTwvbWFyaz5gO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFoYXNFeGFjdE9wdGlvbikge1xyXG4gICAgICAgIGhhc0V4YWN0T3B0aW9uID0gdmFsdWUgPT09IHNlYXJjaFZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnZpc2libGVPcHRpb25zQ291bnQgPSB2aXNpYmxlT3B0aW9uc0NvdW50O1xyXG5cclxuICAgIGlmICh0aGlzLmFsbG93TmV3T3B0aW9uKSB7XHJcbiAgICAgIGlmICh2YWx1ZSAmJiAhaGFzRXhhY3RPcHRpb24pIHtcclxuICAgICAgICB0aGlzLnNldE5ld09wdGlvbigpO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZU9wdGlvbnNDb3VudCsrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTmV3T3B0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRvZ2dsZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdoYXMtc2VhcmNoLXZhbHVlJywgdmFsdWUpO1xyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgdGhpcy5zZXRPcHRpb25zSGVpZ2h0KCk7XHJcbiAgICB0aGlzLnNldFZpc2libGVPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBzZXRPcHRpb25Qcm9wKGluZGV4LCBrZXksIHZhbHVlKSB7XHJcbiAgICBpZiAoIXRoaXMub3B0aW9uc1tpbmRleF0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9uc1tpbmRleF1ba2V5XSA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc2V0T3B0aW9uc0hlaWdodCgpIHtcclxuICAgIHRoaXMuJG9wdGlvbnNMaXN0LnN0eWxlLmhlaWdodCA9IHRoaXMub3B0aW9uSGVpZ2h0ICogdGhpcy52aXNpYmxlT3B0aW9uc0NvdW50ICsgJ3B4JztcclxuICB9XHJcblxyXG4gIHNldERyb3Bib3hQb3NpdGlvbigpIHtcclxuICAgIGlmICh0aGlzLnBvc2l0aW9uICE9PSAnYXV0bycpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtb3JlVmlzaWJsZVNpZGVzID0gdGhpcy5nZXRNb3JlVmlzaWJsZVNpZGVzKHRoaXMuJHdyYXBwZXIpO1xyXG4gICAgbGV0IHNob3dPbkxlZnQgPSBmYWxzZTtcclxuXHJcbiAgICAvKiogY2hlY2sgdGhhdCBpcyBkcm9wYm94IGhpZGRlbiBvbiByaWdodCBlZGdlIC0gb25seSBpZiBjdXN0b20gd2lkdGggZ2l2ZW4gKi9cclxuICAgIGlmICh0aGlzLmRyb3Bib3hXaWR0aCkge1xyXG4gICAgICBsZXQgYnV0dG9uQ29vcmRzID0gdGhpcy4kdG9nZ2xlQnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBsZXQgdmlld3BvcnRXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICBsZXQgZHJvcGJveFdpZHRoID0gcGFyc2VGbG9hdCh0aGlzLmRyb3Bib3hXaWR0aCk7XHJcbiAgICAgIGxldCBoaWRkZW5PblJpZ2h0ID0gYnV0dG9uQ29vcmRzLmxlZnQgKyBkcm9wYm94V2lkdGggPiB2aWV3cG9ydFdpZHRoO1xyXG4gICAgICBsZXQgaGlkZGVuT25MZWZ0ID0gZHJvcGJveFdpZHRoID4gYnV0dG9uQ29vcmRzLnJpZ2h0O1xyXG4gICAgICBcclxuICAgICAgaWYgKGhpZGRlbk9uUmlnaHQgJiYgIWhpZGRlbk9uTGVmdCkge1xyXG4gICAgICAgIHNob3dPbkxlZnQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAncG9zaXRpb24tdG9wJywgbW9yZVZpc2libGVTaWRlcy52ZXJ0aWNhbCA9PT0gJ3RvcCcpO1xyXG4gICAgdGhpcy50b2dnbGVDbGFzcyh0aGlzLiR3cmFwcGVyLCAncG9zaXRpb24tbGVmdCcsIHNob3dPbkxlZnQpO1xyXG4gIH1cclxuXHJcbiAgc2V0TmV3T3B0aW9uKCkge1xyXG4gICAgbGV0IHZhbHVlID0gdGhpcy5zZWFyY2hWYWx1ZU9yaWdpbmFsLnRyaW0oKTtcclxuXHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIGxldCBuZXdJbmRleCA9IG5ld09wdGlvbi5pbmRleDtcclxuICAgICAgXHJcbiAgICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ3ZhbHVlJywgdmFsdWUpO1xyXG4gICAgICB0aGlzLnNldE9wdGlvblByb3AobmV3SW5kZXgsICdsYWJlbCcsIHZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgIHZhbHVlLFxyXG4gICAgICAgIGxhYmVsOiB2YWx1ZSxcclxuICAgICAgICBpc0N1cnJlbnROZXc6IHRydWUsXHJcbiAgICAgIH07XHJcbiAgXHJcbiAgICAgIHRoaXMuYWRkT3B0aW9uKHRoaXMuZ2V0T3B0aW9uT2JqKGRhdGEpKTtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqIHNldCBtZXRob2RzIC0gZW5kICovXHJcblxyXG4gIC8qKiBnZXQgbWV0aG9kcyAtIHN0YXJ0ICovXHJcbiAgZ2V0VmlzaWJsZU9wdGlvbnMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aXNpYmxlT3B0aW9ucyB8fCBbXTtcclxuICB9XHJcblxyXG4gIGdldFZhbHVlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyB0aGlzLnNlbGVjdGVkVmFsdWVzIDogdGhpcy5zZWxlY3RlZFZhbHVlc1swXTtcclxuICB9XHJcblxyXG4gIGdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCkge1xyXG4gICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLiRvcHRpb25zQ29udGFpbmVyLnNjcm9sbFRvcCAvIHRoaXMub3B0aW9uSGVpZ2h0KTtcclxuICB9XHJcblxyXG4gIGdldFZpc2libGVTdGFydEluZGV4KCkge1xyXG4gICAgbGV0IGZpcnN0VmlzaWJsZU9wdGlvbkluZGV4ID0gdGhpcy5nZXRGaXJzdFZpc2libGVPcHRpb25JbmRleCgpO1xyXG4gICAgbGV0IHN0YXJ0SW5kZXggPSBmaXJzdFZpc2libGVPcHRpb25JbmRleCAtIHRoaXMuaGFsZk9wdGlvbnNDb3VudDtcclxuXHJcbiAgICBpZiAoc3RhcnRJbmRleCA8IDApIHtcclxuICAgICAgc3RhcnRJbmRleCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN0YXJ0SW5kZXg7XHJcbiAgfVxyXG5cclxuICBnZXRUb29sdGlwQXR0clRleHQodGV4dCwgZWxsaXBzaXNPbmx5KSB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgJ2RhdGEtdG9vbHRpcCc6IHRleHQgfHwgJycsXHJcbiAgICAgICdkYXRhLXRvb2x0aXAtZW50ZXItZGVsYXknOiB0aGlzLnRvb2x0aXBFbnRlckRlbGF5LFxyXG4gICAgICAnZGF0YS10b29sdGlwLXotaW5kZXgnOiB0aGlzLnpJbmRleCxcclxuICAgICAgJ2RhdGEtdG9vbHRpcC1lbGxpcHNpcy1vbmx5JzogZWxsaXBzaXNPbmx5IHx8IGZhbHNlLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVzVGV4dChkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldE9wdGlvbk9iaihkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdPcHRpb24gPSB7XHJcbiAgICAgIGluZGV4OiBkYXRhLmluZGV4LFxyXG4gICAgICBpc0N1cnJlbnROZXc6IGRhdGEuaXNDdXJyZW50TmV3IHx8IGZhbHNlLFxyXG4gICAgICB2YWx1ZTogZGF0YS52YWx1ZSxcclxuICAgICAgbGFiZWw6IGRhdGEubGFiZWwsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBuZXdPcHRpb247XHJcbiAgfVxyXG5cclxuICBnZXROZXdPcHRpb24oKSB7XHJcbiAgICBsZXQgbGFzdE9wdGlvbiA9IHRoaXMub3B0aW9uc1t0aGlzLmxhc3RPcHRpb25JbmRleF07XHJcblxyXG4gICAgaWYgKCFsYXN0T3B0aW9uIHx8ICFsYXN0T3B0aW9uLmlzQ3VycmVudE5ldykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGxhc3RPcHRpb247XHJcbiAgfVxyXG5cclxuICBnZXRPcHRpb25JbmRleCh2YWx1ZSkge1xyXG4gICAgbGV0IGluZGV4O1xyXG5cclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICB0aGlzLm9wdGlvbnMuc29tZSgoZCkgPT4ge1xyXG4gICAgICAgIGlmIChkLnZhbHVlID09IHZhbHVlKSB7XHJcbiAgICAgICAgICBpbmRleCA9IGQuaW5kZXg7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH1cclxuICAvKiogZ2V0IG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgb3BlbkRyb3Bib3goaXNTaWxlbnQpIHtcclxuICAgIHRoaXMuc2V0RHJvcGJveFBvc2l0aW9uKCk7XHJcbiAgICB0aGlzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdjbG9zZWQnKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnb3BlbmVkJyk7XHJcblxyXG4gICAgICBpZiAoIWlzU2lsZW50KSB7XHJcbiAgICAgICAgdGhpcy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnZm9jdXNlZCcpO1xyXG4gICAgICAgIHRoaXMuZm9jdXNTZWFyY2hJbnB1dCgpO1xyXG4gICAgICB9XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIGNsb3NlRHJvcGJveChpc1NpbGVudCkge1xyXG4gICAgbGV0IHRyYW5zaXRpb25EdXJhdGlvbiA9IGlzU2lsZW50ID8gMCA6IHRoaXMudHJhbnNpdGlvbkR1cmF0aW9uO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKHRoaXMuJHdyYXBwZXIsICdvcGVuZWQgZm9jdXNlZCcpO1xyXG4gICAgICB0aGlzLnJlbW92ZU9wdGlvbkZvY3VzKCk7XHJcbiAgICB9LCAwKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5hZGRDbGFzcyh0aGlzLiR3cmFwcGVyLCAnY2xvc2VkJyk7XHJcbiAgICB9LCB0cmFuc2l0aW9uRHVyYXRpb24pO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlRHJvcGJveCgpIHtcclxuICAgIGlmICh0aGlzLmlzT3BlbmVkKCkpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3goKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3goKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzT3BlbmVkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFzQ2xhc3ModGhpcy4kd3JhcHBlciwgJ29wZW5lZCcpO1xyXG4gIH1cclxuXHJcbiAgZm9jdXNTZWFyY2hJbnB1dCgpIHtcclxuICAgIGxldCAkZWxlID0gdGhpcy4kc2VhcmNoSW5wdXQ7XHJcblxyXG4gICAgaWYgKCRlbGUpIHtcclxuICAgICAgJGVsZS5mb2N1cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9jdXNPcHRpb24oZGlyZWN0aW9uLCBlbGUpIHtcclxuICAgIGxldCAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3gucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24uZm9jdXNlZCcpO1xyXG4gICAgbGV0ICRuZXdGb2N1c2VkRWxlO1xyXG5cclxuICAgIGlmIChlbGUpIHtcclxuICAgICAgJG5ld0ZvY3VzZWRFbGUgPSBlbGU7XHJcbiAgICB9IGVsc2UgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAvKiBpZiBubyBlbGVtZW50IG9uIGZvY3VzIGNob29zZSBmaXJzdCB2aXNpYmxlIG9uZSAqL1xyXG4gICAgICBsZXQgZmlyc3RWaXNpYmxlT3B0aW9uSW5kZXggPSB0aGlzLmdldEZpcnN0VmlzaWJsZU9wdGlvbkluZGV4KCk7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy4kZHJvcGJveC5xdWVyeVNlbGVjdG9yKGAudnNjb21wLW9wdGlvbltkYXRhLXZpc2libGUtaW5kZXg9XCIke2ZpcnN0VmlzaWJsZU9wdGlvbkluZGV4fVwiXWApO1xyXG5cclxuICAgICAgaWYgKHRoaXMuaGFzQ2xhc3MoJG5ld0ZvY3VzZWRFbGUsICdkaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgJG5ld0ZvY3VzZWRFbGUgPSB0aGlzLmdldFNpYmxpbmcoJG5ld0ZvY3VzZWRFbGUsICduZXh0Jyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICRuZXdGb2N1c2VkRWxlID0gdGhpcy5nZXRTaWJsaW5nKCRmb2N1c2VkRWxlLCBkaXJlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkbmV3Rm9jdXNlZEVsZSAmJiAkbmV3Rm9jdXNlZEVsZSAhPT0gJGZvY3VzZWRFbGUpIHtcclxuICAgICAgaWYgKCRmb2N1c2VkRWxlKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygkZm9jdXNlZEVsZSwgJ2ZvY3VzZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5hZGRDbGFzcygkbmV3Rm9jdXNlZEVsZSwgJ2ZvY3VzZWQnKTtcclxuICAgICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcCh0aGlzLmdldERhdGEoJG5ld0ZvY3VzZWRFbGUsICdpbmRleCcpLCB0cnVlKTtcclxuICAgICAgdGhpcy5tb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkbmV3Rm9jdXNlZEVsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlRm9jdXNlZE9wdGlvblRvVmlldygkZm9jdXNlZEVsZSkge1xyXG4gICAgaWYgKCEkZm9jdXNlZEVsZSkge1xyXG4gICAgICAkZm9jdXNlZEVsZSA9IHRoaXMuJGRyb3Bib3gucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24uZm9jdXNlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghJGZvY3VzZWRFbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBuZXdTY3JvbGxUb3A7XHJcbiAgICBsZXQgY29udGFpbmVyUmVjdCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBsZXQgb3B0aW9uUmVjdCA9ICRmb2N1c2VkRWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgbGV0IGNvbnRhaW5lclRvcCA9IGNvbnRhaW5lclJlY3QudG9wO1xyXG4gICAgbGV0IGNvbnRhaW5lckJvdHRvbSA9IGNvbnRhaW5lclJlY3QuYm90dG9tO1xyXG4gICAgbGV0IGNvbnRhaW5lckhlaWdodCA9IGNvbnRhaW5lclJlY3QuaGVpZ2h0O1xyXG4gICAgbGV0IG9wdGlvblRvcCA9IG9wdGlvblJlY3QudG9wO1xyXG4gICAgbGV0IG9wdGlvbkJvdHRvbSA9IG9wdGlvblJlY3QuYm90dG9tO1xyXG4gICAgbGV0IG9wdGlvbkhlaWdodCA9IG9wdGlvblJlY3QuaGVpZ2h0O1xyXG4gICAgbGV0IG9wdGlvbk9mZnNldFRvcCA9ICRmb2N1c2VkRWxlLm9mZnNldFRvcDtcclxuICAgIGxldCBvcHRpb25zVG9wID0gdGhpcy5nZXREYXRhKHRoaXMuJG9wdGlvbnMsICd0b3AnLCAnbnVtYmVyJyk7XHJcblxyXG4gICAgLyogaWYgb3B0aW9uIGhpZGRlbiBvbiB0b3AgKi9cclxuICAgIGlmIChjb250YWluZXJUb3AgPiBvcHRpb25Ub3ApIHtcclxuICAgICAgbmV3U2Nyb2xsVG9wID0gb3B0aW9uT2Zmc2V0VG9wICsgb3B0aW9uc1RvcDtcclxuICAgIH0gZWxzZSBpZiAoY29udGFpbmVyQm90dG9tIDwgb3B0aW9uQm90dG9tKSB7XHJcbiAgICAgIC8qIGlmIG9wdGlvbiBoaWRkZW4gb24gYm90dG9tICovXHJcbiAgICAgIG5ld1Njcm9sbFRvcCA9IG9wdGlvbk9mZnNldFRvcCAtIGNvbnRhaW5lckhlaWdodCArIG9wdGlvbkhlaWdodCArIG9wdGlvbnNUb3A7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5ld1Njcm9sbFRvcCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wID0gbmV3U2Nyb2xsVG9wO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlT3B0aW9uRm9jdXMoKSB7XHJcbiAgICBsZXQgJGZvY3VzZWRFbGUgPSB0aGlzLiRkcm9wYm94LnF1ZXJ5U2VsZWN0b3IoJy52c2NvbXAtb3B0aW9uLmZvY3VzZWQnKTtcclxuXHJcbiAgICBpZiAoISRmb2N1c2VkRWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCRmb2N1c2VkRWxlLCAnZm9jdXNlZCcpO1xyXG4gICAgdGhpcy50b2dnbGVGb2N1c2VkUHJvcChudWxsKTtcclxuICB9XHJcblxyXG4gIHNlbGVjdE9wdGlvbigkZWxlKSB7XHJcbiAgICBpZiAoISRlbGUpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0FkZGluZyA9ICF0aGlzLmhhc0NsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG5cclxuICAgIC8qKiBvbiBzZWxlY3Rpbmcgc2FtZSB2YWx1ZSBpbiBzaW5nbGUgc2VsZWN0ICovXHJcbiAgICBpZiAoIWlzQWRkaW5nICYmICF0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VEcm9wYm94KCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSB0aGlzLnNlbGVjdGVkVmFsdWVzO1xyXG4gICAgbGV0IHNlbGVjdGVkVmFsdWUgPSB0aGlzLmdldERhdGEoJGVsZSwgJ3ZhbHVlJyk7XHJcbiAgICBsZXQgc2VsZWN0ZWRJbmRleCA9IHRoaXMuZ2V0RGF0YSgkZWxlLCAnaW5kZXgnKTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkUHJvcChzZWxlY3RlZEluZGV4LCBpc0FkZGluZyk7XHJcblxyXG4gICAgaWYgKGlzQWRkaW5nKSB7XHJcbiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgICAgc2VsZWN0ZWRWYWx1ZXMucHVzaChzZWxlY3RlZFZhbHVlKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUFsbE9wdGlvbnNDbGFzcygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZFZhbHVlcy5sZW5ndGgpIHtcclxuICAgICAgICAgIHRoaXMudG9nZ2xlU2VsZWN0ZWRQcm9wKHRoaXMuZ2V0T3B0aW9uSW5kZXgoc2VsZWN0ZWRWYWx1ZXNbMF0pLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxlY3RlZFZhbHVlcyA9IFtzZWxlY3RlZFZhbHVlXTtcclxuICAgICAgICBsZXQgJHByZXZTZWxlY3RlZE9wdGlvbiA9IHRoaXMuJGVsZS5xdWVyeVNlbGVjdG9yKCcudnNjb21wLW9wdGlvbi5zZWxlY3RlZCcpO1xyXG5cclxuICAgICAgICBpZiAoJHByZXZTZWxlY3RlZE9wdGlvbikge1xyXG4gICAgICAgICAgdGhpcy50b2dnbGVDbGFzcygkcHJldlNlbGVjdGVkT3B0aW9uLCAnc2VsZWN0ZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNsb3NlRHJvcGJveCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnRvZ2dsZUNsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUNsYXNzKCRlbGUsICdzZWxlY3RlZCcpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbUZyb21BcnJheShzZWxlY3RlZFZhbHVlcywgc2VsZWN0ZWRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaGFzQ2xhc3MoJGVsZSwgJ2N1cnJlbnQtbmV3JykpIHtcclxuICAgICAgdGhpcy5iZWZvcmVTZWxlY3ROZXdWYWx1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0VmFsdWUoc2VsZWN0ZWRWYWx1ZXMsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0Rm9jdXNlZE9wdGlvbigpIHtcclxuICAgIHRoaXMuc2VsZWN0T3B0aW9uKHRoaXMuJGRyb3Bib3gucXVlcnlTZWxlY3RvcignLnZzY29tcC1vcHRpb24uZm9jdXNlZCcpKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUFsbE9wdGlvbnMoaXNTZWxlY3RlZCkge1xyXG4gICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGlzU2VsZWN0ZWQgIT09ICdib29sZWFuJykge1xyXG4gICAgICBpc1NlbGVjdGVkID0gIXRoaXMuaGFzQ2xhc3ModGhpcy4kdG9nZ2xlQWxsT3B0aW9ucywgJ2NoZWNrZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuZm9yRWFjaCgoZCkgPT4ge1xyXG4gICAgICBpZiAoZC5pc0Rpc2FibGVkIHx8IGQuaXNDdXJyZW50TmV3KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkLmlzU2VsZWN0ZWQgPSBpc1NlbGVjdGVkO1xyXG5cclxuICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcclxuICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKGQudmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNldFZhbHVlKHNlbGVjdGVkVmFsdWVzLCB0cnVlKTtcclxuICAgIHRoaXMudG9nZ2xlQWxsT3B0aW9uc0NsYXNzKGlzU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNBbGxTZWxlY3RlZCkge1xyXG4gICAgaWYgKHR5cGVvZiBpc0FsbFNlbGVjdGVkICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgaXNBbGxTZWxlY3RlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICBpc0FsbFNlbGVjdGVkID0gIXRoaXMub3B0aW9ucy5zb21lKChkKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gIWQuaXNTZWxlY3RlZCAmJiAhZC5pc0Rpc2FibGVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2dnbGVDbGFzcyh0aGlzLiR0b2dnbGVBbGxPcHRpb25zLCAnY2hlY2tlZCcsIGlzQWxsU2VsZWN0ZWQpO1xyXG4gICAgdGhpcy5pc0FsbFNlbGVjdGVkID0gaXNBbGxTZWxlY3RlZDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUZvY3VzZWRQcm9wKGluZGV4LCBpc0ZvY3VzZWQgPSBmYWxzZSkge1xyXG4gICAgaWYgKHRoaXMuZm9jdXNlZE9wdGlvbkluZGV4KSB7XHJcbiAgICAgIHRoaXMuc2V0T3B0aW9uUHJvcCh0aGlzLmZvY3VzZWRPcHRpb25JbmRleCwgJ2lzRm9jdXNlZCcsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AoaW5kZXgsICdpc0ZvY3VzZWQnLCBpc0ZvY3VzZWQpO1xyXG4gICAgdGhpcy5mb2N1c2VkT3B0aW9uSW5kZXggPSBpbmRleDtcclxuICB9XHJcblxyXG4gIHRvZ2dsZVNlbGVjdGVkUHJvcChpbmRleCwgaXNTZWxlY3RlZCA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLnNldE9wdGlvblByb3AoaW5kZXgsICdpc1NlbGVjdGVkJywgaXNTZWxlY3RlZCk7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUb1RvcCgpIHtcclxuICAgIGxldCBpc0Nsb3NlZCA9ICF0aGlzLmlzT3BlbmVkKCk7XHJcblxyXG4gICAgaWYgKGlzQ2xvc2VkKSB7XHJcbiAgICAgIHRoaXMub3BlbkRyb3Bib3godHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNjcm9sbFRvcCA9IHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wO1xyXG5cclxuICAgIGlmIChzY3JvbGxUb3AgPiAwKSB7XHJcbiAgICAgIHRoaXMuJG9wdGlvbnNDb250YWluZXIuc2Nyb2xsVG9wID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNDbG9zZWQpIHtcclxuICAgICAgdGhpcy5jbG9zZURyb3Bib3godHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKChkKSA9PiB7XHJcbiAgICAgIGQuaXNTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zZXRWYWx1ZShudWxsLCB0cnVlKTtcclxuICAgIHRoaXMuYWZ0ZXJWYWx1ZVNldCh0cnVlKTtcclxuICB9XHJcblxyXG4gIGFmdGVyVmFsdWVTZXQoaXNSZXNldCkge1xyXG4gICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xyXG4gICAgdGhpcy50b2dnbGVBbGxPcHRpb25zQ2xhc3MoaXNSZXNldCA/IGZhbHNlIDogdW5kZWZpbmVkKTtcclxuICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBhZGRPcHRpb24oZGF0YSkge1xyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxhc3RPcHRpb25JbmRleCsrO1xyXG4gICAgZGF0YS5pbmRleCA9IHRoaXMubGFzdE9wdGlvbkluZGV4O1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy5wdXNoKHRoaXMuZ2V0T3B0aW9uT2JqKGRhdGEpKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZU9wdGlvbihpbmRleCkge1xyXG4gICAgaWYgKCFpbmRleCAmJiBpbmRleCAhPSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHRoaXMubGFzdE9wdGlvbkluZGV4LS07XHJcbiAgfVxyXG5cclxuICByZW1vdmVOZXdPcHRpb24oKSB7XHJcbiAgICBsZXQgbmV3T3B0aW9uID0gdGhpcy5nZXROZXdPcHRpb24oKTtcclxuXHJcbiAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uKG5ld09wdGlvbi5pbmRleCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBiZWZvcmVTZWxlY3ROZXdWYWx1ZSgpIHtcclxuICAgIGxldCBuZXdPcHRpb24gPSB0aGlzLmdldE5ld09wdGlvbigpO1xyXG4gICAgbGV0IG5ld0luZGV4ID0gbmV3T3B0aW9uLmluZGV4O1xyXG5cclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ2lzQ3VycmVudE5ldycsIGZhbHNlKTtcclxuICAgIHRoaXMuc2V0T3B0aW9uUHJvcChuZXdJbmRleCwgJ2lzTmV3JywgdHJ1ZSk7XHJcblxyXG4gICAgLyoqIHVzaW5nIHNldFRpbWVvdXQgdG8gZml4IHRoZSBpc3N1ZSBvZiBkcm9wYm94IGdldHRpbmcgY2xvc2VkIG9uIHNlbGVjdCAqL1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0U2VhcmNoVmFsdWUoJycpO1xyXG4gICAgICB0aGlzLmZvY3VzU2VhcmNoSW5wdXQoKTtcclxuICAgIH0sIDApO1xyXG4gIH1cclxuXHJcbiAgLyoqIGhlbHBlciBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBhZGRDbGFzcygkZWxlLCBjbGFzc05hbWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gICAgdGhpcy5nZXRFbGVtZW50cygkZWxlKS5mb3JFYWNoKChfdGhpcykgPT4ge1xyXG4gICAgICBfdGhpcy5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzTmFtZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNsYXNzKCRlbGUsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICB0aGlzLmdldEVsZW1lbnRzKCRlbGUpLmZvckVhY2goKF90aGlzKSA9PiB7XHJcbiAgICAgIF90aGlzLmNsYXNzTGlzdC5yZW1vdmUoLi4uY2xhc3NOYW1lKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQ2xhc3MoJGVsZSwgY2xhc3NOYW1lLCBpc0FkZCkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNBZGQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBpc0FkZCA9IEJvb2xlYW4oaXNBZGQpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0FkZGVkO1xyXG5cclxuICAgIHRoaXMuZ2V0RWxlbWVudHMoJGVsZSkuZm9yRWFjaCgoX3RoaXMpID0+IHtcclxuICAgICAgaXNBZGRlZCA9IF90aGlzLmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lLCBpc0FkZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gaXNBZGRlZDtcclxuICB9XHJcblxyXG4gIGhhc0NsYXNzKCRlbGUsIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcclxuICB9XHJcblxyXG4gIGlzRW1wdHkodmFsdWUpIHtcclxuICAgIGxldCByZXN1bHQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgaWYgKE9iamVjdC5rZXlzKHZhbHVlKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGlzTm90RW1wdHkodmFsdWUpIHtcclxuICAgIHJldHVybiAhdGhpcy5pc0VtcHR5KHZhbHVlKTtcclxuICB9XHJcblxyXG4gIHNldERhdGEoJGVsZSwgbmFtZSwgdmFsdWUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGVsZS5kYXRhc2V0W25hbWVdID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBnZXRTdHlsZVRleHQocHJvcHMsIHNraXBBdHRyTmFtZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9ICcnO1xyXG5cclxuICAgIGZvciAobGV0IGsgaW4gcHJvcHMpIHtcclxuICAgICAgcmVzdWx0ICs9IGAke2t9OiAke3Byb3BzW2tdfTtgO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZXN1bHQgJiYgIXNraXBBdHRyTmFtZSkge1xyXG4gICAgICByZXN1bHQgPSBgc3R5bGU9XCIke3Jlc3VsdH1cImA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIGdldEVsZW1lbnRzKCRlbGUpIHtcclxuICAgIGlmICghJGVsZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCRlbGUubGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgJGVsZSA9IFskZWxlXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gJGVsZTtcclxuICB9XHJcblxyXG4gIGdldERhdGEoJGVsZSwgbmFtZSwgdHlwZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdmFsdWUgPSAkZWxlID8gJGVsZS5kYXRhc2V0W25hbWVdIDogJyc7XHJcblxyXG4gICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdmFsdWUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgdmFsdWUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUl0ZW1Gcm9tQXJyYXkoYXJyYXksIHZhbHVlLCBjbG9uZUFycmF5KSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpIHx8ICFhcnJheS5sZW5ndGggfHwgIXZhbHVlKSB7XHJcbiAgICAgIHJldHVybiBhcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2xvbmVBcnJheSkge1xyXG4gICAgICBhcnJheSA9IFsuLi5hcnJheV07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGluZGV4ID0gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XHJcblxyXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICBhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhcnJheTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUFycmF5RW1wdHkoYXJyYXkpIHtcclxuICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheSkgfHwgIWFycmF5Lmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycmF5LmZpbHRlcigoZCkgPT4gISFkKTtcclxuICB9XHJcblxyXG4gIGdldE1vcmVWaXNpYmxlU2lkZXMoJGVsZSkge1xyXG4gICAgaWYgKCEkZWxlKSB7XHJcbiAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYm94ID0gJGVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBhdmFpbGFibGVXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgbGV0IGF2YWlsYWJsZUhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIGxldCBsZWZ0QXJlYSA9IGJveC5sZWZ0O1xyXG4gICAgbGV0IHRvcEFyZWEgPSBib3gudG9wO1xyXG4gICAgbGV0IHJpZ2h0QXJlYSA9IGF2YWlsYWJsZVdpZHRoIC0gbGVmdEFyZWEgLSBib3gud2lkdGg7XHJcbiAgICBsZXQgYm90dG9tQXJlYSA9IGF2YWlsYWJsZUhlaWdodCAtIHRvcEFyZWEgLSBib3guaGVpZ2h0O1xyXG4gICAgbGV0IGhvcml6b250YWwgPSBsZWZ0QXJlYSA+IHJpZ2h0QXJlYSA/ICdsZWZ0JyA6ICdyaWdodCc7XHJcbiAgICBsZXQgdmVydGljYWwgPSB0b3BBcmVhID4gYm90dG9tQXJlYSA/ICd0b3AnIDogJ2JvdHRvbSc7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaG9yaXpvbnRhbCxcclxuICAgICAgdmVydGljYWwsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0U2libGluZygkZWxlLCBkaXJlY3Rpb24pIHtcclxuICAgIGxldCBwcm9wTmFtZSA9IGRpcmVjdGlvbiA9PT0gJ25leHQnID8gJ25leHRFbGVtZW50U2libGluZycgOiAncHJldmlvdXNFbGVtZW50U2libGluZyc7XHJcblxyXG4gICAgZG8ge1xyXG4gICAgICBpZiAoJGVsZSkge1xyXG4gICAgICAgICRlbGUgPSAkZWxlW3Byb3BOYW1lXTtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAodGhpcy5oYXNDbGFzcygkZWxlLCAnZGlzYWJsZWQnKSk7XHJcblxyXG4gICAgcmV0dXJuICRlbGU7XHJcbiAgfVxyXG5cclxuICBnZXRBdHRyaWJ1dGVzVGV4dChkYXRhKSB7XHJcbiAgICBsZXQgaHRtbCA9ICcnO1xyXG4gIFxyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybiBodG1sO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZm9yIChsZXQgayBpbiBkYXRhKSB7XHJcbiAgICAgIGh0bWwgKz0gIGAgJHtrfT1cIiR7ZGF0YVtrXX1cIiBgO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcmV0dXJuIGh0bWw7XHJcbiAgfVxyXG5cclxuICBjb252ZXJ0VG9Cb29sZWFuKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gKHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSAndHJ1ZScpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gIH1cclxuICAvKiogaGVscGVyIG1ldGhvZHMgLSBlbmQgKi9cclxuXHJcbiAgLyoqIHN0YXRpYyBtZXRob2RzIC0gc3RhcnQgKi9cclxuICBzdGF0aWMgaW5pdChvcHRpb25zKSB7XHJcbiAgICBsZXQgJGVsZUFycmF5ID0gb3B0aW9ucy5lbGU7XHJcblxyXG4gICAgaWYgKCEkZWxlQXJyYXkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzaW5nbGVFbGUgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAodHlwZW9mICRlbGVBcnJheSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgJGVsZUFycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigkZWxlQXJyYXkpO1xyXG5cclxuICAgICAgaWYgKCEkZWxlQXJyYXkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoJGVsZUFycmF5Lmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICRlbGVBcnJheSA9IFskZWxlQXJyYXldO1xyXG4gICAgICBzaW5nbGVFbGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpbnN0YW5jZXMgPSBbXTtcclxuICAgICRlbGVBcnJheS5mb3JFYWNoKCgkZWxlKSA9PiB7XHJcbiAgICAgIG9wdGlvbnMuZWxlID0gJGVsZTtcclxuICAgICAgaW5zdGFuY2VzLnB1c2gobmV3IFZpcnR1YWxTZWxlY3Qob3B0aW9ucykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHNpbmdsZUVsZSA/IGluc3RhbmNlc1swXSA6IGluc3RhbmNlcztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjbG9zZUFsbERyb3Bib3goJGVsZVRvS2VlcE9wZW4pIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52c2NvbXAtd3JhcHBlcicpLmZvckVhY2goKCRlbGUpID0+IHtcclxuICAgICAgaWYgKCRlbGVUb0tlZXBPcGVuICYmICRlbGVUb0tlZXBPcGVuID09PSAkZWxlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkZWxlLnBhcmVudEVsZW1lbnQudmlydHVhbFNlbGVjdC5jbG9zZURyb3Bib3goKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlc2V0Rm9ybShlKSB7XHJcbiAgICBsZXQgJGZvcm0gPSBlLnRhcmdldC5jbG9zZXN0KCdmb3JtJyk7XHJcblxyXG4gICAgaWYgKCEkZm9ybSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnZzY29tcC13cmFwcGVyJykuZm9yRWFjaCgoJGVsZSkgPT4ge1xyXG4gICAgICAkZWxlLnBhcmVudEVsZW1lbnQudmlydHVhbFNlbGVjdC5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVzZXQoKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3QucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRWYWx1ZU1ldGhvZCh2YWx1ZSwgc2lsZW50Q2hhbmdlKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0VmFsdWVNZXRob2QodmFsdWUsIHNpbGVudENoYW5nZSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0T3B0aW9uc01ldGhvZChvcHRpb25zKSB7XHJcbiAgICB0aGlzLnZpcnR1YWxTZWxlY3Quc2V0T3B0aW9uc01ldGhvZChvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXREaXNhYmxlZE9wdGlvbnNNZXRob2Qob3B0aW9ucykge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnNldERpc2FibGVkT3B0aW9uc01ldGhvZChvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB0b2dnbGVTZWxlY3RBbGwoaXNTZWxlY3RlZCkge1xyXG4gICAgdGhpcy52aXJ0dWFsU2VsZWN0LnRvZ2dsZUFsbE9wdGlvbnMoaXNTZWxlY3RlZCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNBbGxTZWxlY3RlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnZpcnR1YWxTZWxlY3QuaXNBbGxTZWxlY3RlZDtcclxuICB9XHJcbiAgLyoqIHN0YXRpYyBtZXRob2RzIC0gc3RhcnQgKi9cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCBWaXJ0dWFsU2VsZWN0LnJlc2V0Rm9ybSk7XHJcblxyXG53aW5kb3cuVmlydHVhbFNlbGVjdCA9IFZpcnR1YWxTZWxlY3Q7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL3ZpcnR1YWwtc2VsZWN0LmpzXCIpO1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgdXNlZCAnZXhwb3J0cycgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuIl0sInNvdXJjZVJvb3QiOiIifQ==